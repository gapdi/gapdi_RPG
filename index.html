<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VILLAIN HUNTER : Minimal Edition</title>
    <style>
        :root {
            --bg-color: #000000;
            --panel-bg: #111111;
            --text-main: #ffffff;
            --text-sub: #888888;
            --accent: #ffffff;
            --border: #222222;
        }

        body { 
            background: var(--bg-color); 
            color: var(--text-main); 
            font-family: 'Pretendard', sans-serif; 
            display: flex; justify-content: center; padding: 20px; margin: 0;
        }

        #game-container { 
            width: 100%; max-width: 400px; 
            background: var(--panel-bg); 
            border-radius: 16px; padding: 25px; 
            border: 1px solid var(--border);
            position: relative;
        }

        /* Ìó§Îçî: ÎèÑÍ∞ê Î≤ÑÌäºÏùÑ ÎààÏóê ÎùÑÍ≤å Î∞∞Ïπò */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 25px; border-bottom: 1px solid var(--border); padding-bottom: 15px;
        }
        h2 { margin: 0; font-weight: 800; font-size: 18px; letter-spacing: 2px; }
        .book-trigger { 
            background: transparent; color: var(--text-sub); border: 1px solid var(--border); 
            padding: 5px 12px; border-radius: 20px; font-size: 11px; cursor: pointer;
        }

        .panel { 
            background: rgba(255,255,255,0.02);
            border-radius: 12px; padding: 18px; margin-bottom: 15px; 
        }

        .title { color: var(--text-sub); font-size: 10px; font-weight: 700; text-transform: uppercase; margin-bottom: 12px; display: block; letter-spacing: 1px; }

        /* HP Î∞î */
        .hp-bar-bg { width: 100%; height: 4px; background: #222; margin: 8px 0; border-radius: 2px; overflow: hidden; }
        .hp-fill { height: 100%; transition: width 0.4s ease; }
        .p-hp-fill { background: #fff; }
        .m-hp-fill { background: #444; }

        /* Î≤ÑÌäº */
        button { 
            background: #fff; color: #000; border: none; 
            padding: 12px; cursor: pointer; font-weight: 700; 
            border-radius: 8px; font-size: 12px; transition: 0.2s;
        }
        button:hover { opacity: 0.8; }
        button:disabled { background: #222; color: #444; cursor: not-allowed; }

        #heal-btn { width: 100%; background: #fff; color: #000; margin-bottom: 15px; }

        /* Î°úÍ∑∏ */
        #log-window { 
            height: 120px; overflow-y: auto; font-size: 12px; color: #666; 
            padding-top: 10px; display: flex; flex-direction: column-reverse; gap: 4px;
        }

        /* Ïò§Î≤ÑÎ†àÏù¥ */
        #book-ui, #ending-ui, #game-over { 
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: 100; padding: 30px; box-sizing: border-box;
            background: #000; flex-direction: column; align-items: center; justify-content: center; text-align: center;
        }
        
        .m-skill { color: #555; font-size: 11px; }
        .rare-msg { color: #ff3e3e; }
        #inv { font-size: 10px; color: #444; margin-top: 10px; text-align: center; word-break: break-all; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="game-over">
        <h1>DEFEATED</h1>
        <button onclick="revive()">REVIVE (-20% GOLD)</button>
    </div>

    <div id="book-ui">
        <h3>VILLAIN BESTIARY</h3>
        <div id="book-list" style="width: 100%; overflow-y: auto; margin: 20px 0; font-size: 12px; color: #666; text-align: left;"></div>
        <button onclick="toggleBook()" style="width: 100%;">BACK TO HUNT</button>
    </div>

    <div id="ending-ui">
        <h1>NIRVANA</h1>
        <p>Î™®Îì† Í≥†ÌÜµÏóêÏÑú Ìï¥Î∞©ÎêòÏóàÏäµÎãàÎã§.</p>
        <button onclick="rebirth()">REBIRTH</button>
    </div>

    <div class="header">
        <h2>VILLAIN HUNTER</h2>
        <button class="book-trigger" onclick="toggleBook()">üìï BESTIARY <span id="book-count-header">0</span>/30</button>
    </div>
    
    <div class="panel">
        <span class="title">My Status</span>
        <div style="display: flex; justify-content: space-between; font-size: 14px;">
            <span id="atk-display">ATK 10</span>
            <span><span id="p-hp">100</span> / <span id="p-max">100</span></span>
        </div>
        <div class="hp-bar-bg"><div id="p-hp-bar" class="hp-fill p-hp-fill"></div></div>
        
        <button id="heal-btn" onclick="usePotion()">USE LUNCH BREAK <span id="heal-count">(0)</span></button>
        
        <div style="display: flex; justify-content: space-between; font-size: 11px; color: var(--text-sub);">
            <span>GOLD: <span id="gold">0</span></span>
            <span>REBIRTH: <span id="re-count">0</span></span>
        </div>
    </div>

    <div class="panel">
        <span class="title" id="m-name">Targeting...</span>
        <div class="hp-bar-bg"><div id="m-hp-bar" class="hp-fill m-hp-fill"></div></div>
        <div id="m-hp-text" style="text-align: right; font-size: 10px; color: #444;">0 / 0</div>
    </div>

    <div class="panel" style="background: transparent; border: 1px dashed #222;">
        <span class="title">Workshop</span>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
            <button id="btn1" onclick="craft('Ìö®ÏûêÏÜê', 15, 'ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑', 3)">Backscratcher</button>
            <button id="btn2" onclick="craft('Ìé∏ÏßÄ', 60, 'ÏÇ¨ÏßÅÏÑú', 1)">Letter</button>
            <button id="btn3" onclick="craft('ÏÜî', 150, 'ÏïîÎ™®ÎãàÏïÑ', 1)">Brush</button>
        </div>
        <p id="inv">Inventory: Empty</p>
    </div>

    <div id="log-window"></div>
</div>

<script>
    const MONSTERS = {
        normal: [
            { name: "Ï∂úÍ∑º Ïã´ÏùÄ ÎåÄÎ¶¨Îãò", hp: 60, atk: 5, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 20, skill: "ÏóÖÎ¨¥ Î©îÏã†Ï†Ä Ìè≠Í≤©!" },
            { name: "Î≤ïÏπ¥ Ïïà Ï£ºÎäî Î∂ÄÏû•Îãò", hp: 70, atk: 7, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 25, skill: "ÏòÅÏàòÏ¶ù Î∞òÎ†§ ÏãúÏ†Ñ!" },
            { name: "ÎùºÎñº Ï∞®Ïû•Îãò", hp: 80, atk: 10, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 30, skill: "ÎÇòÎïåÎäî ÎßêÏù¥Ïïº~ ÌõàÏàò!" },
            { name: "Î©îÎâ¥ Î™ª Í≥†Î•¥Îäî ÏÇ¨Ïõê", hp: 50, atk: 4, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 15, skill: "ÏïÑÎ¨¥Í±∞ÎÇòÏöî! Í≤∞Ï†ïÏû•Ïï†!" },
            { name: "Ìá¥Í∑ºÏßÅÏ†Ñ ÌåÄÏû•Îãò", hp: 100, atk: 15, drop: "ÏÇ¨ÏßÅÏÑú", gold: 50, skill: "Ïû†Íπê ÎÇòÏ¢Ä Î≥¥ÏßÄ? Í∏∞Ïäµ!" },
            { name: "Îç∞Ïù¥ÌÑ∞ ÏóÜÎäî Ìè∞", hp: 40, atk: 6, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 20, skill: "Î°úÎî© Ïä§ÌîºÎÑà Î¨¥ÌïúÎ£®ÌîÑ!" },
            { name: "Ïïà ÏùΩÎäî Ïπ¥ÌÜ°Î∞©", hp: 90, atk: 12, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 35, skill: "1 Ïïà ÏÇ¨ÎùºÏßÄÎäî Ï†ÄÏ£º!" },
            { name: "ÎàÖÎàÖÌïú ÏπòÌÇ®", hp: 45, atk: 5, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 15, skill: "Í∏∞Î¶ÑÏßÑ ÎÉÑÏÉà Ïú†Ìòπ!" },
            { name: "ÏÉàÎÅºÎ∞úÍ∞ÄÎùΩ Ï∞ßÏùå", hp: 200, atk: 80, drop: "ÏïîÎ™®ÎãàÏïÑ", gold: 100, skill: "Ïπ®Î¨µÏùò ÎπÑÎ™Ö!" },
            { name: "ÏïàÍ≤Ω Ï∞æÎäî ÎÇò", hp: 75, atk: 5, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 25, skill: "ÏπòÎß§ Ï¥àÍ∏∞ Ï¶ùÏÉÅ Í≥µÍ≤©!" },
            { name: "Ï†ñÏùÄ Ïä¨Î¶¨Ìçº", hp: 150, atk: 30, drop: "ÏïîÎ™®ÎãàÏïÑ", gold: 70, skill: "ÎàÖÎàÖÌïú Î∂àÏæåÍ∞ê!" },
            { name: "ÏûîÏï° Î∂ÄÏ°± Ïπ¥Îìú", hp: 110, atk: 22, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 50, skill: "ÏûîÏï° Î∂ÄÏ°±!" },
            { name: "ÏùºÏöîÏùº Î∞§ Ïö∞Ïö∏Ìï®", hp: 140, atk: 15, drop: "ÏÇ¨ÏßÅÏÑú", gold: 65, skill: "Í∞úÏΩò ÏóîÎî©Í≥° ÌôòÏ≤≠!" },
            { name: "ÎπÑÎ≤à 5Î≤à ÌãÄÎ¶º", hp: 120, atk: 20, drop: "ÏÇ¨ÏßÅÏÑú", gold: 60, skill: "Î≥∏Ïù∏Ïù∏Ï¶ù Î¨¥ÌïúÎ£®ÌîÑ!" },
            { name: "Ïî® ÎßéÏùÄ ÏàòÎ∞ï", hp: 65, atk: 7, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 24, skill: "Ïî® Î±âÍ∏∞ Ïó∞ÏÇ¨!" },
            { name: "Ïïà ÌÑ∞ÏßÄÎäî WIFI", hp: 80, atk: 10, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 25, skill: "Ìïë Ìè≠Î∞ú!" },
            { name: "Î≥¥Ïù¥Ïä§ÌîºÏã±", hp: 50, atk: 5, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 10, skill: "Í≤ÄÏ∞∞ ÏÇ¨Ïπ≠!" },
            { name: "Î≤ÑÏä§ Í±∞Íæ∏Î°ú ÌÉê", hp: 100, atk: 10, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 40, skill: "Î©òÌÉà Ï†ïÎ∞òÎåÄ Ï£ºÌñâ!" },
            { name: "ÎàÖÎàÖÌïú ÌåùÏΩò", hp: 40, atk: 3, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 12, skill: "ÏßàÍ∏¥ Ïò•ÏàòÏàò ÍªçÏßà!" },
            { name: "Îßê Ïïà Îì£Îäî AI", hp: 90, atk: 15, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 35, skill: "Î™∞ÎùºÏöî ÏãúÏ†Ñ!" },
            { name: "ÏÇ¨ÎùºÏßÑ Î¶¨Î™®Ïª®", hp: 110, atk: 20, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 45, skill: "ÌñâÎ∞©Î∂àÎ™Ö!" },
            { name: "Î¨¥Ìïú Î°úÎî© Ïú†ÌäúÎ∏å", hp: 85, atk: 12, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 30, skill: "ÌôîÏßàÍµ¨ÏßÄ!" },
            { name: "Ï∞®Í∞ÄÏö¥ Î∂ïÏñ¥Îπµ", hp: 50, atk: 6, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 18, skill: "Î∞ÄÍ∞ÄÎ£® Î∞òÏ£Ω!" },
            { name: "Îã´ÌûàÎäî ÏßÄÌïòÏ≤† Î¨∏", hp: 130, atk: 25, drop: "ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑", gold: 55, skill: "ÏßÄÍ∞Å ÌôïÏ†ï!" },
            { name: "ÌíàÏ†àÎêú ÌïúÏ†ïÌåê", hp: 160, atk: 40, drop: "ÏÇ¨ÏßÅÏÑú", gold: 80, skill: "ÌîåÎ†âÏä§ Î∂àÎä•!" }
        ],
        rare: [
            { name: "üëë ÏõîÏöîÏùº 8:59 AM", hp: 800, atk: 60, gold: 500, skill: "Í∏∞ÏÉÅ ÏïåÎûå 10Ïó∞ÌÉÄ!", drop: "ÏÇ¨ÏßÅÏÑú" },
            { name: "üëë 3ÎÖÑ Ïïà Îπ§ ÏñëÎßê", hp: 600, atk: 70, gold: 400, skill: "ÌôîÌïô Î¨¥Í∏∞ ÏïÖÏ∑®!", drop: "ÏïîÎ™®ÎãàÏïÑ" },
            { name: "üëë ÏúàÎèÑÏö∞ ÏóÖÎç∞Ïù¥Ìä∏", hp: 1000, atk: 55, gold: 600, skill: "Í∞ïÏ†ú Ïû¨Î∂ÄÌåÖ!", drop: "ÏÇ¨ÏßÅÏÑú" },
            { name: "üëë Î™ÖÏ†à ÏûîÏÜåÎ¶¨Íæº", hp: 1200, atk: 45, gold: 700, skill: "ÎπÑÍµê Î∂ÑÏÑù!", drop: "ÏÇ¨ÏßÅÏÑú" },
            { name: "üëë Ï†ÑÏï†Ïù∏Ïùò ÏûêÎãà?", hp: 900, atk: 80, gold: 550, skill: "ÏÉàÎ≤Ω Í∞êÏÑ± Ìè≠Í≤©!", drop: "ÏïîÎ™®ÎãàÏïÑ" }
        ]
    };

    let player = { lv:1, atk:10, hp:100, maxHp:100, gold:0, inv:{}, book:{}, rebirthCount:0, potion:0, potionUsed: false, isDead: false };
    let monster = { name:"", hp:0, max:0, atk:0, drop:"", gold:0, skill:"" };

    function battle() {
        if (player.isDead) return;
        monster.hp -= player.atk;
        if (monster.hp > 0) {
            player.hp -= monster.atk;
            if (Math.random() < 0.15) addLog(`<span class="m-skill">${monster.skill}</span>`);
        }
        if (player.hp <= 0) { player.hp = 0; gameOver(); } 
        else if (monster.hp <= 0) { win(); }
        updateUI();
    }

    function usePotion() {
        if (player.potion > 0 && !player.potionUsed) {
            player.potion--; player.potionUsed = true;
            player.hp = Math.min(player.maxHp, player.hp + Math.floor(player.maxHp * 0.8));
            addLog(`üíñ Ï†êÏã¨ÏùÑ Î®πÍ≥† Í∏∞Ïö¥ÏùÑ Ï∞®Î†∏ÏäµÎãàÎã§.`);
            updateUI();
        }
    }

    function win() {
        player.gold += monster.gold;
        player.book[monster.name] = (player.book[monster.name] || 0) + 1;
        player.hp = Math.min(player.maxHp, player.hp + Math.floor(player.maxHp * 0.5)); // Ï≤òÏπò Ïãú 50% Ï¶âÏãú ÌöåÎ≥µ
        player.potionUsed = false;
        player.potion++; // Î™¨Ïä§ÌÑ∞ Ïû°ÏùÑ ÎïåÎßàÎã§ Î¨¥Ï°∞Í±¥ 1Í∞ú ÌöçÎìù
        
        if (Math.random() > 0.4) player.inv[monster.drop] = (player.inv[monster.drop] || 0) + 1;
        
        if (Object.keys(player.book).length >= 30) { document.getElementById('ending-ui').style.display = 'flex'; player.isDead = true; return; }
        player.lv++; spawn(); save();
    }

    function spawn() {
        const isRare = Math.random() < 0.15;
        let d = isRare ? MONSTERS.rare[Math.floor(Math.random()*MONSTERS.rare.length)] 
                       : MONSTERS.normal[Math.floor(Math.random()*MONSTERS.normal.length)];
        monster = { ...d, max: d.hp+(player.lv*5), hp: d.hp+(player.lv*5), atk: d.atk+(player.lv) };
        if(isRare) addLog(`<span class="rare-msg">‚ö† ${monster.name} Îì±Ïû•!</span>`);
        updateUI();
    }

    function rebirth() {
        const rc = (player.rebirthCount || 0) + 1;
        player = { lv:1, atk:10+(rc*50), hp:150, maxHp:150, gold:0, inv:{}, book:{}, rebirthCount:rc, potion:0, potionUsed:false, isDead:false };
        document.getElementById('ending-ui').style.display='none';
        spawn(); save(); updateUI();
    }

    function toggleBook() {
        const ui = document.getElementById('book-ui');
        ui.style.display = (ui.style.display === 'flex') ? 'none' : 'flex';
        if(ui.style.display === 'flex') renderBook();
    }

    function renderBook() {
        const list = document.getElementById('book-list');
        list.innerHTML = "";
        [...MONSTERS.normal, ...MONSTERS.rare].forEach(m => {
            const s = player.book[m.name] || 0;
            list.innerHTML += `<div style="padding:6px 0; border-bottom:1px solid #111; display:flex; justify-content:space-between; color:${s>0?'#eee':'#333'}">
                <span>${s>0 ? m.name : 'Unknown Villain'}</span>
                <span>${s} Ïû°Ïùå</span>
            </div>`;
        });
        document.getElementById('book-count-header').innerText = Object.keys(player.book).length;
    }

    function save() { localStorage.setItem('funny_hunter_v6', JSON.stringify(player)); }
    function load() {
        const s = localStorage.getItem('funny_hunter_v6');
        if(s) { player = JSON.parse(s); player.isDead = false; if(player.hp <= 0) player.hp = player.maxHp; }
        spawn();
    }

    function gameOver() { player.isDead = true; document.getElementById('game-over').style.display = 'flex'; }
    function revive() { 
        player.isDead = false; player.hp = player.maxHp; player.gold = Math.floor(player.gold*0.8); 
        document.getElementById('game-over').style.display = 'none'; spawn(); updateUI(); 
    }
    
    function craft(n, p, m, c) {
        if((player.inv[m]||0)>=c) { 
            player.inv[m]-=c; player.atk+=p; player.maxHp+=30; player.hp=player.maxHp; 
            addLog(`üõ† ${n} Ïû•Ï∞© ÏôÑÎ£å.`); updateUI(); save(); 
        }
    }

    function updateUI() {
        document.getElementById('p-hp').innerText = Math.floor(player.hp);
        document.getElementById('p-max').innerText = player.maxHp;
        document.getElementById('p-hp-bar').style.width = (player.hp/player.maxHp*100) + "%";
        document.getElementById('m-hp-bar').style.width = (monster.hp/monster.max*100) + "%";
        document.getElementById('m-hp-text').innerText = `${Math.max(0, Math.floor(monster.hp))} / ${monster.max}`;
        document.getElementById('atk-display').innerText = `ATK ${player.atk}`;
        document.getElementById('gold').innerText = player.gold;
        document.getElementById('re-count').innerText = player.rebirthCount || 0;
        document.getElementById('m-name').innerText = `Target: ${monster.name}`;
        document.getElementById('heal-count').innerText = `(${player.potion})`;
        document.getElementById('heal-btn').disabled = (player.potion <= 0 || player.potionUsed || player.isDead);
        document.getElementById('book-count-header').innerText = Object.keys(player.book).length;
        
        let invS = "Inventory: ";
        for(let k in player.inv) if(player.inv[k]>0) invS += `${k}(${player.inv[k]}) `;
        document.getElementById('inv').innerText = invS;
        document.getElementById('btn1').disabled = (player.inv['ÎàÖÎàÖÌïú ÌäÄÍπÄÏò∑'] || 0) < 3;
        document.getElementById('btn2').disabled = (player.inv['ÏÇ¨ÏßÅÏÑú'] || 0) < 1;
        document.getElementById('btn3').disabled = (player.inv['ÏïîÎ™®ÎãàÏïÑ'] || 0) < 1;
    }

    function addLog(m) {
        const l = document.getElementById('log-window');
        l.innerHTML = `<div>${m}</div>` + l.innerHTML;
        if (l.childNodes.length > 20) l.removeChild(l.lastChild);
    }

    window.onload = () => { load(); updateUI(); setInterval(battle, 1000); };
</script>
</body>
</html>