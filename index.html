<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Monster Hunter Idle - Rare Update</title>
    <style>
        body { background-color: #1a1a1a; color: #e0e0e0; font-family: 'Courier New', monospace; display: flex; justify-content: center; padding: 20px; }
        #game-container { width: 100%; max-width: 600px; border: 2px solid #8b4513; padding: 20px; background-color: #2b2b2b; }
        .panel { margin-bottom: 15px; padding: 10px; border: 1px solid #555; background: #222; }
        .title { color: #f1c40f; font-weight: bold; margin-bottom: 10px; display: block; }
        #log-window { height: 180px; overflow-y: auto; background: #000; padding: 10px; font-size: 0.85rem; color: #aaa; border: 1px solid #444; }
        button { background: #444; color: #fff; border: 1px solid #777; padding: 5px 10px; cursor: pointer; margin-right: 5px; }
        button:hover { background: #666; }
        button:disabled { color: #555; opacity: 0.5; }
        .rare-text { color: #e74c3c; font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <h1 style="text-align:center; color:#e74c3c;">HUNTER IDLE</h1>

    <div class="panel">
        <span class="title">[ í—Œí„° ì •ë³´ ]</span>
        <p>ê³µê²©ë ¥: <span id="atk">10</span> | ë¬´ê¸°: <span id="weapon">ì—†ìŒ</span> | ê³¨ë“œ: <span id="gold">0</span>G</p>
        <div id="inventory">ì†Œì¬: ì—†ìŒ</div>
    </div>

    <div class="panel">
        <span class="title">[ ì‚¬ëƒ¥ êµ¬ì—­ ]</span>
        <p id="monster-ui">ëŒ€ìƒ: <b>ì² ê´‘ì„ ìŠ¬ë¼ì„</b></p>
        <p>HP: <span id="monster-hp">60</span> / <span id="monster-max-hp">60</span></p>
    </div>

    <div class="panel">
        <span class="title">[ ê°€ê³µì  ]</span>
        <button id="craft-1" onclick="craft('ì´ˆë³´ì ê²€', 15, 'ë¹„ëŠ˜', 3)">ì´ˆë³´ì ê²€ (ë¹„ëŠ˜ 3)</button>
        <button id="craft-2" onclick="craft('í™”ì—¼ì˜ ëŒ€ê²€', 80, 'í™”ì—¼ ì£¼ë¨¸ë‹ˆ', 1)">í™”ì—¼ì˜ ëŒ€ê²€ (ì£¼ë¨¸ë‹ˆ 1)</button>
    </div>

    <div id="log-window"></div>
</div>

<script>
    let player = { atk: 10, gold: 0, weapon: "ì—†ìŒ", inventory: {}, level: 1 };
    let monster = { name: "ì² ê´‘ì„ ìŠ¬ë¼ì„", hp: 60, maxHp: 60, dropItem: "ë¹„ëŠ˜", goldReward: 20 };

    function battle() {
        monster.hp -= player.atk;
        if (monster.hp <= 0) {
            player.gold += monster.goldReward;
            let dropMsg = "";
            if (Math.random() > 0.4) { // 60% í™•ë¥  ë“œë
                player.inventory[monster.dropItem] = (player.inventory[monster.dropItem] || 0) + 1;
                dropMsg = ` [${monster.dropItem}] íšë“!`;
            }
            addLog(`âœ… ${monster.name} ì²˜ì¹˜! +${monster.goldReward}G${dropMsg}`);
            player.level++;
            spawnMonster();
            saveGame();
        }
        updateUI();
    }

    function spawnMonster() {
        if (Math.random() < 0.1) { // 10% í™•ë¥  í¬ê·€ ëª¬ìŠ¤í„°
            monster.name = "ğŸ”¥ í™”ì—¼ ë¦¬ì˜¤ë ˆ";
            monster.maxHp = 300 + (player.level * 10);
            monster.dropItem = "í™”ì—¼ ì£¼ë¨¸ë‹ˆ";
            monster.goldReward = 100;
            addLog(`<span class="rare-text">âš ï¸ í¬ê·€ ëª¬ìŠ¤í„°ê°€ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤!</span>`);
        } else {
            monster.name = "ì² ê´‘ì„ ìŠ¬ë¼ì„";
            monster.maxHp = 60 + (player.level * 5);
            monster.dropItem = "ë¹„ëŠ˜";
            monster.goldReward = 20;
        }
        monster.hp = monster.maxHp;
    }

    function craft(name, power, mat, count) {
        if ((player.inventory[mat] || 0) >= count) {
            player.inventory[mat] -= count;
            player.atk += power;
            player.weapon = name;
            addLog(`ğŸ› ï¸ [${name}] ì œì‘ ì™„ë£Œ! (ê³µê²©ë ¥ +${power})`);
            updateUI();
            saveGame();
        }
    }

    function saveGame() {
        const data = JSON.stringify({ player, monster });
        document.cookie = `hunterData=${encodeURIComponent(data)}; max-age=604800; path=/`;
    }

    function loadGame() {
        const cookie = document.cookie.split('; ').find(row => row.startsWith('hunterData='));
        if (cookie) {
            const data = JSON.parse(decodeURIComponent(cookie.split('=')[1]));
            player = data.player;
            monster = data.monster;
            addLog("ğŸ’¾ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.");
        }
    }

    function updateUI() {
        document.getElementById('atk').innerText = player.atk;
        document.getElementById('gold').innerText = player.gold;
        document.getElementById('weapon').innerText = player.weapon;
        document.getElementById('monster-hp').innerText = Math.max(0, monster.hp);
        document.getElementById('monster-max-hp').innerText = monster.maxHp;
        document.getElementById('monster-ui').innerHTML = `ëŒ€ìƒ: <b>${monster.name}</b>`;
        
        let invText = "ì†Œì¬: ";
        for (let key in player.inventory) {
            if (player.inventory[key] > 0) invText += `${key}(${player.inventory[key]}) `;
        }
        document.getElementById('inventory').innerText = invText;

        document.getElementById('craft-1').disabled = (player.inventory['ë¹„ëŠ˜'] || 0) < 3;
        document.