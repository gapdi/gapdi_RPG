<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VILLAIN HUNTER : THE COMPLETE EDITION</title>
    <style>
        :root {
            --bg-color: #0c0c0c; --panel-bg: #1a1a1a; --text-main: #eeeeee;
            --common: #ffffff; --rare: #ffff00; --epic: #bf00ff;
            --unique: #00f2ff; --danger: #ff4444; --border: #333333; --gold: #ffd700;
        }
        body { background: var(--bg-color); color: var(--text-main); font-family: 'Pretendard', sans-serif; display: flex; justify-content: center; padding: 20px; margin: 0; line-height: 1.4; font-size: 14px; }
        #game-container { width: 100%; max-width: 480px; background: var(--panel-bg); border-radius: 20px; padding: 25px; border: 1px solid var(--border); position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .equip-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 15px; }
        .equip-slot { background: #000; border: 1px solid #444; padding: 6px; border-radius: 8px; text-align: center; font-size: 10px; height: 65px; display: flex; flex-direction: column; justify-content: center; overflow: hidden; }
        .equip-slot span { color: #888; display: block; margin-bottom: 2px; font-size: 9px; }
        .equip-name { color: #fff; font-weight: bold; line-height: 1.1; word-break: keep-all; font-size: 10px; }

        .panel { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .hp-bar-bg { width: 100%; height: 12px; background: #222; margin: 8px 0; border-radius: 6px; overflow: hidden; border: 1px solid #333; }
        .hp-fill { height: 100%; transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        button { background: #ffffff; color: #000000; border: none; padding: 12px; cursor: pointer; font-weight: 900; border-radius: 8px; width: 100%; border: 1px solid #ccc; font-size: 14px; }
        button:active { transform: scale(0.98); }
        button:disabled { background: #333; color: #666; cursor: not-allowed; border: none; }

        #log-window { height: 120px; overflow-y: auto; font-size: 12px; color: #bbb; display: flex; flex-direction: column-reverse; gap: 5px; padding: 12px; background: #000; border-radius: 10px; border: 1px solid #333; margin-top: 10px; }
        .modal { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; background: rgba(0,0,0,0.95); flex-direction: column; align-items: center; justify-content: center; text-align: center; border-radius: 20px; padding: 20px; }
        
        .color-unique { color: var(--unique) !important; text-shadow: 0 0 5px var(--unique); }
        .color-epic { color: var(--epic); }
        .color-rare { color: var(--rare); }
        .unique-alert { color: var(--unique); font-weight: bold; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
    </style>
</head>
<body>

<div id="game-container">
    <div id="game-over" class="modal">
        <h1 style="color:var(--danger); font-size: 40px; margin-bottom: 0;">MENTAL BREAK</h1>
        <div id="killer-name" style="font-weight: bold; margin-top: 10px; color: #fff;"></div>
        <div id="death-quote" style="font-style: italic; margin: 20px 0; color: var(--danger); font-size: 16px;"></div>
        <button onclick="location.reload()">ì‚¬íšŒìƒí™œ ì¬ì…ì‚¬ (ì²˜ìŒë¶€í„°)</button>
    </div>

    <div class="panel">
        <div style="font-size: 12px; margin-bottom: 10px; font-weight: bold; color: var(--gold); display: flex; justify-content: space-between;">
            <span>í˜„ëŒ€ì¸ êµ°ì¥ (Lv.<span id="lv-display">1</span>)</span>
            <span>ë„ê° ì²˜ì¹˜: <span id="book-count" class="color-unique">0</span> / 50</span>
        </div>
        <div class="equip-grid">
            <div class="equip-slot"><span>ê³µê²©(ë¬´ê¸°)</span><div class="equip-name" id="eq-weapon">ë§¨ì£¼ë¨¹</div></div>
            <div class="equip-slot"><span>ë©˜íƒˆ(ëª¨ì)</span><div class="equip-name" id="eq-hat">-</div></div>
            <div class="equip-slot"><span>ì²´ë ¥(ìƒì˜)</span><div class="equip-name" id="eq-top">-</div></div>
            <div class="equip-slot"><span>ë²„í‹°ê¸°(í•˜ì˜)</span><div class="equip-name" id="eq-bottom">-</div></div>
            <div class="equip-slot"><span>ì¼ë¨¸ë¦¬(ì¥ê°‘)</span><div class="equip-name" id="eq-glove">-</div></div>
            <div class="equip-slot"><span>ìš´(ëª©ê±¸ì´)</span><div class="equip-name" id="eq-neck">-</div></div>
            <div class="equip-slot"><span>ê°ê°(ì†ëª©)</span><div class="equip-name" id="eq-wrist">-</div></div>
            <div class="equip-slot" style="border-color: var(--gold);"><span>ë¹„ìƒê¸ˆ</span><div class="equip-name color-gold" id="gold-display">0</div></div>
        </div>
    </div>
    
    <div class="panel">
        <div style="display:flex; justify-content:space-between; font-size: 11px; margin-bottom: 5px; color: #aaa;">
            <span id="stat-atk">ë§ë¹¨: 10</span>
            <span id="stat-crit">ì¹˜ëª…íƒ€: 5%</span>
            <span id="stat-dodge">íšŒí”¼: 5%</span>
        </div>
        <div style="font-weight: bold; display: flex; justify-content: space-between;">
            <span>ë‚˜ì˜ ë©˜íƒˆ ê²Œì´ì§€</span>
            <span><span id="p-hp">100</span> / <span id="p-max">100</span></span>
        </div>
        <div class="hp-bar-bg"><div id="p-hp-bar" class="hp-fill" style="background:#fff;"></div></div>
        <button id="heal-btn" onclick="usePotion()">ğŸ• ì ì‹¬ ì‹ì‚¬ (HP 80% íšŒë³µ) <span id="heal-count">(0)</span></button>
    </div>

    <div class="panel" style="border-left: 4px solid var(--danger);">
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div id="m-name" style="font-weight:900; font-size: 16px;">ë¹ŒëŸ° íƒìƒ‰ ì¤‘...</div>
            <div id="m-hp-text" style="font-size: 11px; color: #888;">0 / 0</div>
        </div>
        <div class="hp-bar-bg"><div id="m-hp-bar" class="hp-fill" style="background:var(--danger);"></div></div>
    </div>

    <div id="log-window"></div>
</div>

<script>
    // [1] ë¹ŒëŸ° 50ì¢… ë°ì´í„° (ì¼ë°˜ 40 + ë ˆì–´ 10)
    const MONSTERS = {
        normal: [
            { name: "ì¶œê·¼ ëŒ€ë¦¬ë‹˜", hp: 60, atk: 5, killMsg: "ê±° ê¹€ëŒ€ë¦¬, ì´ ì„œë¥˜ ì˜¤ëŠ˜ê¹Œì§€ì•¼.", unique: {type: 'weapon', name: "â˜… ëŒ€ë¦¬ë‹˜ì˜ ì„œë¥˜ë­‰ì¹˜", val: 40} },
            { name: "ë²•ì¹´ ë¶€ì¥ë‹˜", hp: 75, atk: 8, killMsg: "ì˜¤ëŠ˜ íšŒì‹ì€ ì‚¼ê²¹ì‚´ì´ë‹¤!", unique: {type: 'neck', name: "â˜… ë¬´í•œ ë²•ì¸ì¹´ë“œ", val: 30} },
            { name: "ë¼ë–¼ ì°¨ì¥ë‹˜", hp: 85, atk: 10, killMsg: "ë‚˜ ë•ŒëŠ” ë§ì´ì•¼...", unique: {type: 'hat', name: "â˜… ë¼ë–¼ ì „ìš© ì°»ì”", val: 35} },
            { name: "í‡´ê·¼ì§ì „ íŒ€ì¥ë‹˜", hp: 130, atk: 22, killMsg: "ì•„ ê°€ê¸° ì „ì— ì´ê²ƒë§Œ ì¢€...", unique: {type: 'wrist', name: "â˜… ì¹¼í‡´ ê¸°ì› ìŠ¤ë§ˆíŠ¸ì›Œì¹˜", val: 35} },
            { name: "ìƒˆë¼ë°œê°€ë½ ì°§ìŒ", hp: 200, atk: 65, killMsg: "ì•…!!!!!!", unique: {type: 'bottom', name: "â˜… ëª¨ì„œë¦¬ ë°©ì§€ íì…˜", val: 70} },
            { name: "ì €ì¥ ì•ˆí•œ ë¬¸ì„œ", hp: 220, atk: 70, killMsg: "ë¸”ë£¨ìŠ¤í¬ë¦°ì€ ì˜ˆê³  ì—†ì´ ì˜µë‹ˆë‹¤.", unique: {type: 'top', name: "â˜… ìë™ ì €ì¥ì˜ ê°€í˜¸", val: 90} },
            { name: "ê¸‰ë˜¥ ì‹ í˜¸", hp: 180, atk: 55, killMsg: "í•˜í•„ ì§€í•˜ì² ì€ ê¸‰í–‰ì´ì—ˆìŠµë‹ˆë‹¤.", unique: {type: 'bottom', name: "â˜… í™©ê¸ˆ ê´„ì•½ê·¼ ì¡°ì ˆê¸°", val: 65} },
            { name: "ìŠ¤í¬ì¼ëŸ¬ ë¹ŒëŸ°", hp: 110, atk: 25, killMsg: "ì‚¬ì‹¤ ì£¼ì¸ê³µ í˜•ì´ ë²”ì¸ì„.", unique: {type: 'glove', name: "â˜… ê·€ë§‰ê¸°ìš© í—¤ë“œì…‹", val: 40} },
            { name: "í™”ì¥ì‹¤ íœ´ì§€ì—†ìŒ", hp: 190, atk: 45, killMsg: "ì–‘ë§ì„ í¬ìƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?", unique: {type: 'neck', name: "â˜… ë¹„ìƒìš© ë¬¼í‹°ìŠˆ", val: 50} },
            { name: "ì”ì•¡ ë¶€ì¡± ì¹´ë“œ", hp: 110, atk: 30, killMsg: "ë’¤ì— ì¤„ ì„  ì‚¬ëŒ 15ëª….", unique: {type: 'neck', name: "â˜… í•œë„ ë¬´ì œí•œ í†µì¥", val: 40} },
            { name: "ë°ì´í„° ì—†ëŠ” í°", hp: 50, atk: 12, killMsg: "ë¡œë”© ìŠ¤í”¼ë„ˆë§Œ 10ë¶„ì§¸.", unique: {type: 'wrist', name: "â˜… 5G ë¬´ì œí•œ ì—ê·¸", val: 20} },
            { name: "ì´ì–´í° í•œìª½ ê³ ì¥", hp: 90, atk: 15, killMsg: "ì™¼ìª½ ê·€ê°€ ì™¸ë¡­ìŠµë‹ˆë‹¤.", unique: {type: 'hat', name: "â˜… ìŠ¤í…Œë ˆì˜¤ ê³¨ì „ë„", val: 30} },
            { name: "ìŠ¤íŒ¸ ì „í™” 070", hp: 45, atk: 5, killMsg: "ë‚®ì  ìëŠ”ë° ëŒ€ì¶œ ê¶Œìœ ë¼ë‹ˆ.", unique: {type: 'wrist', name: "â˜… ìŠ¤íŒ¸ ìë™ ì°¨ë‹¨ê¸°", val: 15} },
            { name: "ì½ì”¹ ì¸ë…€", hp: 145, atk: 38, killMsg: "ìˆ«ì 1ì˜ ì••ë°•.", unique: {type: 'neck', name: "â˜… ë©˜íƒˆ ë³µêµ¬ ì‚¬ì§„", val: 50} },
            { name: "ì¸µê°„ì†ŒìŒ ë§ì¹˜", hp: 165, atk: 42, killMsg: "ìœ—ì§‘ì— ë§ì¹˜ì§ˆ ì‹ ì´ ì‚½ë‹ˆë‹¤.", unique: {type: 'hat', name: "â˜… ì†ŒìŒ ì°¨ë‹¨ í—¬ë©§", val: 55} },
            { name: "ê´‘ê³  ìŠ¤í‚µ ë¶ˆê°€", hp: 85, atk: 13, killMsg: "15ì´ˆê°€ 15ë…„ ê°™ì•˜ìŠµë‹ˆë‹¤.", unique: {type: 'top', name: "â˜… í”„ë¦¬ë¯¸ì—„ ë©¤ë²„ì‹­", val: 30} },
            { name: "ì•ˆí„°ì§€ëŠ” WIFI", hp: 70, atk: 16, killMsg: "ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ëŒ€ìš”.", unique: {type: 'wrist', name: "â˜… ì™€ì´íŒŒì´ ì¦í­ê¸°", val: 25} },
            { name: "ì•ˆ ì”»ì€ í…€ë¸”ëŸ¬", hp: 60, atk: 20, killMsg: "ì»¤í”¼ì—ì„œ ëœì¥ ë§›ì´ ë‚©ë‹ˆë‹¤.", unique: {type: 'glove', name: "â˜… ì‚´ê·  ì„¸ì²™ ì†”", val: 20} },
            { name: "ë§Œì› ë²„ìŠ¤ ë°±íŒ©", hp: 125, atk: 28, killMsg: "ê°€ë°©ì— ë°€ë ¤ ëª» ë‚´ë ¸ìŠµë‹ˆë‹¤.", unique: {type: 'top', name: "â˜… ë°±íŒ© ë°©ì–´ í‰ê°‘", val: 45} },
            { name: "ê²¨ìš¸ ì •ì „ê¸°", hp: 95, atk: 40, killMsg: "ì°Œë¦¿! ì†ëì´ íƒ€ë“¤ì–´ê°‘ë‹ˆë‹¤.", unique: {type: 'glove', name: "â˜… ì ˆì—° ê³ ë¬´ ì¥ê°‘", val: 35} },
            { name: "ë¹„ì˜¤ëŠ” í° ìš´ë™í™”", hp: 110, atk: 24, killMsg: "ì‹ ë°œì´ ëŠªì´ ë˜ì—ˆìŠµë‹ˆë‹¤.", unique: {type: 'bottom', name: "â˜… ì™„ì „ ë°©ìˆ˜ ì½”íŒ…", val: 40} },
            { name: "ì˜ëª» ë³´ë‚¸ ì¹´í†¡", hp: 160, atk: 65, killMsg: "ë¶€ì¥ë‹˜ê»˜ 'ì‚¬ë‘í•´'ë¼ê³  ë³´ëƒ„.", unique: {type: 'wrist', name: "â˜… ì „ì†¡ ì·¨ì†Œ ë²„íŠ¼", val: 60} },
            { name: "ì¹¨ëŒ€ ë°‘ ë¦¬ëª¨ì»¨", hp: 75, atk: 12, killMsg: "ê²°êµ­ ì¼ì–´ë‚˜ì„œ ê»ìŠµë‹ˆë‹¤.", unique: {type: 'hat', name: "â˜… ë‡ŒíŒŒ ì¡°ì¢… ë°´ë“œ", val: 20} },
            { name: "ì•ˆ ì§€ì›Œì§€ëŠ” ì–¼ë£©", hp: 105, atk: 22, killMsg: "ìµœì•  ì…”ì¸ ì— ë§ˆë¼íƒ•ì„...", unique: {type: 'top', name: "â˜… ì–¼ë£© ì œê±° ìŠ¤í‹±", val: 40} },
            { name: "ë¹„ë²ˆ 5íšŒ ì˜¤ë¥˜", hp: 150, atk: 48, killMsg: "30ì´ˆ ë’¤ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", unique: {type: 'wrist', name: "â˜… ì§€ë¬¸ ì¸ì‹ ì„¼ì„œ", val: 50} },
            { name: "USB ë°˜ëŒ€ë¡œ ë¼ì›€", hp: 50, atk: 10, killMsg: "ë’¤ì§‘ì–´ë„ ì•ˆ ë“¤ì–´ê°€ìš”.", unique: {type: 'glove', name: "â˜… Cíƒ€ì… ë³€í™˜ê¸°", val: 15} },
            { name: "ê¹œë¹¡í•œ ì—ì–´ì»¨", hp: 175, atk: 35, killMsg: "ê³ ì§€ì„œì— 0ì´ í•˜ë‚˜ ë”...", unique: {type: 'bottom', name: "â˜… ì—ë„ˆì§€ 1ë“±ê¸‰ ë°”ì§€", val: 55} },
            { name: "ëˆ…ëˆ…í•œ ì‹œë¦¬ì–¼", hp: 45, atk: 5, killMsg: "ì¢…ì´ ì”¹ëŠ” ì¤„ ì•Œì•˜ìŠµë‹ˆë‹¤.", unique: {type: 'neck', name: "â˜… ë°€í ìš©ê¸° íœë˜íŠ¸", val: 15} },
            { name: "ì•ˆ ì—´ë¦¬ëŠ” ëšœê»‘", hp: 90, atk: 16, killMsg: "ê³ ë¬´ì¥ê°‘ ê»´ë„ ì•ˆ ì—´ë ¤ìš”.", unique: {type: 'glove', name: "â˜… ì•„ê·€í˜ ê°•í™” ì¥ê°‘", val: 30} },
            { name: "ê³ ì¥ë‚œ í‚¤ë³´ë“œ", hp: 135, atk: 32, killMsg: "ì—”í„°í‚¤ê°€ ë¹ ì¡ŒìŠµë‹ˆë‹¤.", unique: {type: 'weapon', name: "â˜… ê¸°ê³„ì‹ ì²­ì¶• í‚¤ë³´ë“œ", val: 60} },
            { name: "ì…ê¸ˆ ì „ í´ë¼ì´ì–¸íŠ¸", hp: 220, atk: 45, killMsg: "ì¢€ ë” í™”ë ¤í•˜ê³  ì‹¬í”Œí•˜ê²Œ!", unique: {type: 'weapon', name: "â˜… ìµœì¢…_ì§„ì§œìµœì¢….psd", val: 80} },
            { name: "ì¡°ë³„ê³¼ì œ í”„ë¦¬ë¼ì´ë”", hp: 150, atk: 30, killMsg: "ì € í• ì•„ë²„ì§€ê°€ í¸ì°®ìœ¼ì…”ì„œ...", unique: {type: 'top', name: "â˜… ë¬´ì„ìŠ¹ì°¨ ê±°ë¶€ê¶Œ", val: 50} },
            { name: "ë¹¨ê°„ë¶ˆ íš¡ë‹¨ë³´ë„", hp: 80, atk: 12, killMsg: "ë²„ìŠ¤ê°€ ë°©ê¸ˆ ë– ë‚¬ìŠµë‹ˆë‹¤.", unique: {type: 'bottom', name: "â˜… ì´ˆìŠ¤í”¼ë“œ ëŸ°ë‹í™”", val: 30} },
            { name: "ê³µê³µì¥ì†Œ ì•¼ë™ìŠ¤í”¼ì»¤", hp: 300, atk: 100, killMsg: "ì£¼ë³€ì˜ ëª¨ë“  ì‹œì„ ì´...", unique: {type: 'hat', name: "â˜… ìˆ˜ì¹˜ì‚¬ ë°©ì§€ ê°€ë©´", val: 120} },
            { name: "ìœ í†µê¸°í•œ ì§€ë‚œ ìš°ìœ ", hp: 110, atk: 50, killMsg: "ì¥ì´ ê¼¬ì—¬ë²„ë ¸ìŠµë‹ˆë‹¤.", unique: {type: 'bottom', name: "â˜… ìœ ì‚°ê·  ë³´í˜¸ë³µ", val: 50} },
            { name: "ì˜†ì§‘ íƒë°° ì˜¤ë°°ì†¡", hp: 130, atk: 25, killMsg: "ëƒ‰ë™ì‹í’ˆì´ ë‹¤ ë…¹ì•˜ìŠµë‹ˆë‹¤.", unique: {type: 'neck', name: "â˜… ì˜¤ë°°ì†¡ ì¶”ì  ì¥ì¹˜", val: 40} },
            { name: "ì¹´ê³µì¡±ì˜ ëˆˆì´", hp: 95, atk: 20, killMsg: "í‚¤ë³´ë“œ ì†Œë¦¬ê°€ ì£„ì¸ê°€ìš”?", unique: {type: 'glove', name: "â˜… ë¬´ì†ŒìŒ í‚¤ë³´ë“œ ìŠ¤í‚¨", val: 30} },
            { name: "ë³´ì´ìŠ¤ í”¼ì‹±", hp: 100, atk: 20, killMsg: "ì„œìš¸ ì¤‘ì•™ ì§€ê²€ì´ë¼ë©´ì„œìš”.", unique: {type: 'neck', name: "â˜… í†µí™” ë…¹ìŒê¸°", val: 30} },
            { name: "ì¤‘ê³ ë‚˜ë¼ ë²½ëŒ", hp: 140, atk: 35, killMsg: "ì•„ì´í° ëŒ€ì‹  ë²½ëŒì´ ì˜´.", unique: {type: 'weapon', name: "â˜… ì‚¬ê¸°ê¾¼ ê²€ê±° ì˜ì¥", val: 60} },
            { name: "ë¬´í•œ ë¡œë”© ì§€ì˜¥", hp: 85, atk: 15, killMsg: "ë¹™ê¸€ë¹™ê¸€... ë‚´ ëˆˆë„ ë¹™ê¸€.", unique: {type: 'wrist', name: "â˜… ê¸°ê°€ ì¸í„°ë„· ì›Œì¹˜", val: 25} }
        ],
        rare: [
            { name: "ğŸ‘‘ ì›”ìš”ì¼ 8:59AM", hp: 1500, atk: 120, killMsg: "ì§€ì˜¥ì˜ 5ì¼ì´ ì‹œì‘ëœë‹¤.", unique: {type: 'weapon', name: "â˜… ì›”ìš”ì¼ íŒŒì‡„ í•´ë¨¸", val: 250} },
            { name: "ğŸ‘‘ ìœˆë„ìš° ì—…ë°ì´íŠ¸", hp: 1800, atk: 100, killMsg: "ë‹¤ì‹œëŠ” ë°œí‘œí•˜ì§€ ë§ˆë¼.", unique: {type: 'glove', name: "â˜… ì—…ë°ì´íŠ¸ ê°•ì œ ì¢…ë£Œ", val: 180} },
            { name: "ğŸ‘‘ ëª…ì ˆ ì”ì†Œë¦¬", hp: 1600, atk: 90, killMsg: "ë„ˆ ì·¨ì—…ì€ ì–¸ì œ í•˜ë‹ˆ?", unique: {type: 'hat', name: "â˜… ì¹œì²™ ì°¨ë‹¨ìš© ì´ì–´í”ŒëŸ¬ê·¸", val: 160} },
            { name: "ğŸ‘‘ ì˜ˆë¹„êµ° í†µì§€ì„œ", hp: 1700, atk: 110, killMsg: "ì¶•í•˜í•©ë‹ˆë‹¤. ë™ì›ì…ë‹ˆë‹¤.", unique: {type: 'top', name: "â˜… ê°œêµ¬ë¦¬ ì „íˆ¬ë³µ", val: 170} },
            { name: "ğŸ‘‘ ëˆ„ì§„ì„¸ ê³ ì§€ì„œ", hp: 2000, atk: 150, killMsg: "ì—¬ë¦„ì€ ì‹œì›í–ˆì§€ë§Œ...", unique: {type: 'bottom', name: "â˜… ì—ì–´ì»¨ ì „ì› ì°¨ë‹¨ê¸°", val: 200} },
            { name: "ğŸ‘‘ ì•¡ì • íŒŒì†", hp: 1900, atk: 130, killMsg: "ë°”ë‹¥ê³¼ì˜ í‚¤ìŠ¤.", unique: {type: 'wrist', name: "â˜… ë°©íƒ„ ê°•í™” ìœ ë¦¬", val: 150} },
            { name: "ğŸ‘‘ ìë‹ˆ? ì „ì• ì¸", hp: 1400, atk: 140, killMsg: "ìƒˆë²½ 2ì‹œëŠ” ìœ„í—˜í•´.", unique: {type: 'neck', name: "â˜… ë²ˆí˜¸ ë³€ê²½ í™•ì¸ì„œ", val: 140} },
            { name: "ğŸ‘‘ ì„œë²„ ì ê²€ ì¤‘", hp: 1650, atk: 80, killMsg: "ì ê²€ì€ ëŠ˜ ì—°ì¥ë©ë‹ˆë‹¤.", unique: {type: 'glove', name: "â˜… ì ì‹¬ì‹œê°„ ë³´ì¥ê¶Œ", val: 130} },
            { name: "ğŸ‘‘ ë¶€ì¥ë‹˜ ê°œì¸ê¸°", hp: 1500, atk: 95, killMsg: "ì•ˆ ì›ƒìœ¼ë©´ ì •ìƒ‰í•¨.", unique: {type: 'top', name: "â˜… ë¦¬ì•¡ì…˜ ìë™ ìƒì„±ê¸°", val: 150} },
            { name: "ğŸ‘‘ ë¹„ìƒê¸ˆ ê±¸ë¦¼", hp: 1800, atk: 160, killMsg: "ê·¸ê±¸ ì™œ ì±…ì¥ ë’¤ì—...", unique: {type: 'neck', name: "â˜… ì´ì¤‘ ì ê¸ˆ ê¸ˆê³ ", val: 210} }
        ]
    };

    // [2] ì•„ì´í…œ 140ì¢… (7ë¶€ìœ„ x 20ë‹¨ê³„)
    const ITEM_NAMES = {
        weapon: ["ë¹ˆ ë¬¼ë³‘", "ì˜ ê°ˆë¦° ì—°í•„", "íƒ•ë¹„ì‹¤ í‹°ìŠ¤í‘¼", "ë¬´ê±°ìš´ ì „ê³µì„œì ", "ë§ ì•ˆë“£ëŠ” ë§ˆìš°ìŠ¤", "ë²•ì  ëŒ€ì‘ í†µì§€ì„œ", "ë‚´ìš©ì¦ëª…ì„œ", "ì‚¬ì§ì„œ(ë¯¸ì œì¶œ)", "íŒ©íŠ¸ í­ê²©ê¸°", "ë¶€ì¥ë‹˜ ë’·ë‹´í™” ìº¡ì²˜ë³¸", "ë…¸ë™ì²­ ì‹ ê³ ë²„íŠ¼", "ê³¼ë¡œì‚¬ ì§ì „ì˜ ëˆˆë¹›", "ë¯¸ì¹œë“¯í•œ íƒ€ì´í•‘", "ë…¼ë¦¬ ì •ì—°í•œ ë©”ì¼", "ì „êµ­ë¯¼ ì²­ì›ì„œ", "í‚¤ë³´ë“œ ìƒ·ê±´", "ê¸ˆìœµì¹˜ë£Œ ì£¼ë¬¸ì„œ", "ë¡œë˜ 1ë“± ë‹¹ì²¨ê¶Œ", "ê±´ë¬¼ì£¼ ë“±ê¸°ê¶Œë¦¬ì¦", "ì ˆëŒ€ì  'ì•„ë‹ˆì˜¤' ê¶Œí•œ"],
        hat: ["êµ¬ë©ë‚œ ë¹„ë‹ˆ", "ë‹¤ì´ì†Œ ê·€ë§ˆê°œ", "í—í´ì–´ì§„ ë¨¸ë¦¬", "íˆ¬ëª… ì¸ê°„ í—¬ë©§", "ì‚¬íšŒì  ê°€ë©´", "ë’·ë‹´í™” í•„í„° ì´ì–´í°", "ìŠ¤íŠ¸ë ˆìŠ¤ ì™„í™” í—¤ë“œì…‹", "ë¬´ì ì˜ ê¸ì • ë§ˆì¸ë“œ", "ì•ˆë“¤ë¦¬ëŠ” ì²™ ê·€ë§ˆê°œ", "í˜„ìíƒ€ì„ìš© ê³ ê¹”", "ë¶ˆë©´ì¦ ì•ˆëŒ€", "í•´íƒˆì˜ ì„œí´ë¦¿", "ìë³¸ì£¼ì˜ì˜ ë¯¸ì†Œ", "ê°•ì²  ë©˜íƒˆ íˆ¬êµ¬", "í¬ì»¤ í˜ì´ìŠ¤ ë§ˆìŠ¤í¬", "ì˜í˜¼ ê°€ì¶œ ë°©ì§€ê¸°", "ì‹¬ë¦¬ ì¹˜ë£Œ ì™•ê´€", "ì—´ë°˜ì˜ í›„ë“œ", "í‡´ê·¼ì˜ ê´‘íœ˜", "ì ˆëŒ€ì  ë¬´ê´€ì‹¬ì˜ ê´€"],
        top: ["ëŠ˜ì–´ë‚œ í‹°ì…”ì¸ ", "ë‹¨ì¶” ë–¨ì–´ì§„ ì…”ì¸ ", "ë³´í’€ ê°€ë””ê±´", "ë•€ì— ì ˆì€ ì…”ì¸ ", "ë¬´ê±°ìš´ ì •ì¥", "ë¹„íŒ ë°©ì–´ ë°©íƒ„ì¡°ë¼", "ì›”ê¸‰ìŸì´ ì „ìš© ê°‘ì˜·", "ìŠ¤íŠ¸ë ˆìŠ¤ í¡ìˆ˜ ì½”íŠ¸", "ì‚¬íšŒì  ì²´ë©´ ì˜ˆë³µ", "ë¹„ë‚œ ë°˜ì‚¬ íŒ¨ë”©", "ê±°ì ˆì˜ ë°”ë¦¬ì¼€ì´ë“œ", "ì¸ë‚´ì‹¬ì˜ í”Œë ˆì´íŠ¸", "ê°•í™”í˜• ì•¼ê·¼ ì í¼", "ìœ ë¦¬ ë©˜íƒˆ ë³´í˜¸êµ¬", "ë¶ˆì‚¬ì¡° ì•¼ê·¼ë³µ", "ì—°ë´‰í˜‘ìƒ ê°€í˜¸", "ë¶€ì¥ë‹˜ ì‹œì„  ì°¨ë‹¨ë²½", "ì²œìƒì˜ ì •ì¥", "ììœ ì˜ ë‚ ê°œ ì½”íŠ¸", "ë¬´ì ì˜ ê±´ë¬¼ì£¼ ë¡œë¸Œ"],
        bottom: ["ë¬´ë¦ ë‚˜ì˜¨ ì¶”ë¦¬ë‹", "êµ¬ê²¨ì§„ ìŠ¬ë™ìŠ¤", "í—ˆë¦¬ ë¼ëŠ” ì²­ë°”ì§€", "ë²„í‹°ê¸° ì‘ì—…ë³µ", "ë¬´ê±°ìš´ ë°œê±¸ìŒ í•˜ì˜", "ì¡°í‡´ ì—´ë§ ê°ë°˜", "ì§€í•˜ì²  ì¢Œì„ ìŸíƒˆ ë°”ì§€", "ì¸ë‚´ì‹¬ì˜ íƒ€ì´ì¦ˆ", "ê·¼ì†ì—°ìˆ˜ ê°•í™” í•˜ì˜", "ì² ë²½ ë°©ì–´ ìŠ¬ë™ìŠ¤", "ê°•ì²  ë‹¤ë¦¬ ê°ë°˜", "íƒˆì¶œìš© ëŸ¬ë‹ ë°”ì§€", "í™©ê¸ˆ íœ´ê°€ ë°˜ë°”ì§€", "ì€í•˜ê³„ ë„í”¼ í•˜ì˜", "í•˜ëŠ˜ì„ ê±·ëŠ” ë°”ì§€", "ë°œì°¨ê¸° ë°©ì–´ìš©", "ì„±ìŠ¤ëŸ¬ìš´ í‡´ê·¼ ê°ë°˜", "ê³µí—ˆì˜ ë‹¤ë¦¬ ë³´í˜¸", "ë¶ˆë©¸ì˜ ì¶œê·¼ ë°”ì§€", "ì²œìƒì˜ ì•ˆë½í•œ í•˜ì˜"],
        glove: ["ë•Œ ë‚€ ì¥ê°‘", "ë¯¸ë„ëŸ¬ìš´ ëª©ì¥ê°‘", "ê±´ì¡°í•œ ë§¨ì†", "ì§€ë¬¸ ë‹³ì€ ì†", "ê´‘í´ ê²Œì´ë° ì¥ê°‘", "ì„œë¥˜ ì •ë¦¬ ê±´í‹€ë¦¿", "ì†ë„ ê°•í™” ì¥ê°‘", "ì•…ìˆ˜ ê±°ì ˆìš© ì¥ê°‘", "ì†ê°€ë½ ìš• ë°©ì§€ê¸°", "ì¼ë¨¸ë¦¬ ìƒìŠ¹ ì¥ê°‘", "ë§ˆë²•ì˜ 'ì „ë‹¬' ì¥ê°‘", "ë³´ê³ ì„œ ìë™ ì™„ì„±", "ì‹ ì˜ ì†ê°€ë½", "ì‹¬ì—°ì˜ ë§ˆìš°ìŠ¤ íŒ¨ë“œ", "ë²ˆê°œ íƒ€ì´í•‘ ì†", "ì ˆëŒ€ì í‚¤ë³´ë“œ ê°€ë“œ", "í–‰ì •ì˜ ì‹  ì¥ê°‘", "ì²œìƒì˜ ì¼ì²˜ë¦¬", "ìš°ì£¼ì˜ ì¡°ìœ¨ì ì†", "ì ˆëŒ€ìì˜ ì‚¬ì¸ íœ"],
        neck: ["ë°§ì¤„ ëª©ê±¸ì´", "ë‚¡ì€ ì‚¬ì›ì¦", "êµ¬ë¦¬ ë™ì „", "ì€ì œ í´ë¦½", "í–‰ìš´ì˜ í´ë¡œë²„", "ë°”ëŒì˜ í‡´ê·¼ ì¸ì¥", "ê°€ì§œ ê¸ˆëª©ê±¸ì´", "ë’·ë‹´í™” ê°ì§€ê¸°", "ë¯¼ì²©í•œ ë„ë§ì˜ ëˆ", "ìš”ì •ì˜ ëˆˆë¬¼", "ì‹œì„  ë¶„ì‚° ëª©ê±¸ì´", "ì°¨ì› ì›”ê¸‰ ë´‰íˆ¬", "ì˜ê²ì˜ ë³´ë„ˆìŠ¤", "ìœ ë ¹ ì•¼ê·¼ ì¦ëª…", "ë¹›ì˜ ê°€ë“œ", "ì‹ ì˜ ì¶•ë³µ", "ê³µí—ˆì˜ ë²•ì¸ì¹´ë“œ", "ë³„ì˜ ìˆ¨ê²°", "ìš´ëª…ì˜ ê¸ˆê³  ì—´ì‡ ", "íšŒì‹ íšŒí”¼ì˜ ì¸ì¥"],
        wrist: ["ì²œ ì†ëª©ë°´ë“œ", "ë‚¡ì€ ê°€ì£½ íŒ”ì°Œ", "ë””ì§€í„¸ ì‹œê³„", "ìŠ¤ë§ˆíŠ¸ ë°´ë“œ", "ì†ëª© í„°ë„ ë³´í˜¸ëŒ€", "ì˜ˆë¦¬í•œ ê°ê° íŒ”ì°Œ", "ì•”ì‚´ìì˜ ì‹œê³„", "ê·¸ë¦¼ì ë³´í˜¸ëŒ€", "ë§ˆë ¥ ìŠ¤ë§ˆíŠ¸ ì›Œì¹˜", "ë“œë˜ê³¤ ë°´ë“œ", "í•„ì‚´ì˜ ê²°ì¬ íŒ”ì°Œ", "í‹°íƒ€ëŠ„ ì›Œì¹˜", "ì˜í˜¼ì˜ ê°¤ëŸ­ì‹œì›Œì¹˜", "ë³„ë¹›ì˜ ì• í”Œì›Œì¹˜", "ì‹ ì„±í•œ ë¡¤ë ‰ìŠ¤(ì§)", "ê³µí—ˆì˜ íŒŒí… í•„ë¦½", "ì‹ ì˜ ì¼ê²©", "íƒœì–‘ì˜ íœ´ì‹ íŒ”ì°Œ", "ìš´ëª…ì˜ ê²°ì¬ ë¼ì¸", "ì‹¬íŒìì˜ ê¸ˆíŒ”ì°Œ"]
    };

    // [3] ê²Œì„ ë¡œì§ ë³€ìˆ˜
    let player = {
        lv: 1, hp: 100, gold: 0, potion: 1, kills: 0, book: {},
        base: { atk: 10, hp: 100, crit: 5, dodge: 5 },
        equip: { weapon: null, hat: null, top: null, bottom: null, glove: null, neck: null, wrist: null }
    };
    let monster = null;

    function init() {
        spawn();
        updateUI();
        setInterval(battle, 1000);
    }

    // [4] ëª¬ìŠ¤í„° ìŠ¤í°
    function spawn() {
        const isRare = (Math.random() < 0.15 && player.kills > 10);
        let pool = isRare ? MONSTERS.rare : MONSTERS.normal;
        let d = pool[Math.floor(Math.random() * pool.length)];
        let growth = 1 + (player.lv * 0.15);
        
        monster = {
            ...d,
            hp: Math.floor(d.hp * growth),
            max: Math.floor(d.hp * growth),
            atk: Math.floor(d.atk * growth),
            isRare: isRare
        };
        addLog(`<span class="${isRare?'color-epic':''}">[${monster.name}]</span> ë“±ì¥!`);
        updateUI();
    }

    // [5] ëŠ¥ë ¥ì¹˜ ê³„ì‚°
    function getStats() {
        let s = { ...player.base };
        for(let t in player.equip) {
            let item = player.equip[t];
            if(!item) continue;
            if(t === 'weapon') s.atk += item.val;
            else if(t === 'neck') s.dodge = Math.min(50, s.dodge + (item.val/3));
            else if(t === 'wrist') s.crit = Math.min(75, s.crit + (item.val/3));
            else s.hp += item.val * 5;
        }
        return s;
    }

    // [6] ì „íˆ¬ ì‹œìŠ¤í…œ
    function battle() {
        if (player.hp <= 0) return;
        let s = getStats();
        
        // í”Œë ˆì´ì–´ ê³µê²©
        let critHit = Math.random() * 100 < s.crit;
        let damage = s.atk * (critHit ? 2 : 1);
        monster.hp -= damage;
        
        if (monster.hp <= 0) { win(); return; }

        // ëª¬ìŠ¤í„° ê³µê²© (íšŒí”¼ ì²´í¬)
        if (Math.random() * 100 < s.dodge) {
            addLog(`ğŸ’¨ íšŒí”¼ ì„±ê³µ!`);
        } else {
            player.hp -= monster.atk;
            if (player.hp <= 0) die();
        }
        updateUI();
    }

    // [7] ìŠ¹ë¦¬ ë° ë“œë
    function win() {
        player.kills++; player.lv++; player.gold += (monster.isRare ? 1000 : 100);
        player.book[monster.name] = true;
        
        let s = getStats();
        player.hp = Math.min(s.hp, player.hp + Math.floor(s.hp * 0.5));
        player.potion++;
        
        addLog(`${monster.name} ì²˜ì¹˜! HP 50% íšŒë³µ & ğŸ• íšë“`);
        
        // 5% ìœ ë‹ˆí¬ ë“œë ì²´í¬
        if (monster.unique && Math.random() < 0.05) {
            let u = monster.unique;
            if (!player.equip[u.type] || player.equip[u.type].val < u.val) {
                player.equip[u.type] = { name: u.name, val: u.val, isUnique: true };
                addLog(`<span class="unique-alert">â˜… ìœ ë‹ˆí¬ íšë“: [${u.name}]</span>`);
            }
        } else {
            dropItem();
        }
        spawn();
    }

    // [8] ì¼ë°˜ ì•„ì´í…œ ë“œë (í‹°ì–´ë³„)
    function dropItem() {
        const types = Object.keys(ITEM_NAMES);
        const type = types[Math.floor(Math.random() * types.length)];
        
        let maxTier = Math.min(19, Math.floor(player.lv / 4));
        let tier = Math.floor(Math.random() * (maxTier + 1));
        let val = (tier + 1) * 12 + Math.floor(Math.random() * player.lv);
        
        let newItem = { name: ITEM_NAMES[type][tier], val: val, isUnique: false, tier: tier };
        
        if (!player.equip[type] || player.equip[type].val < newItem.val) {
            player.equip[type] = newItem;
            addLog(`ì¥ë¹„ êµì²´: [${newItem.name}]`);
        }
    }

    // [9] ë¶€ê°€ ê¸°ëŠ¥
    function usePotion() {
        let s = getStats();
        if (player.potion > 0) {
            player.potion--;
            player.hp = Math.min(s.hp, player.hp + Math.floor(s.hp * 0.8));
            addLog("ğŸ• ë“ ë“ í•œ ì ì‹¬ìœ¼ë¡œ ë©˜íƒˆì„ íšŒë³µí–ˆìŠµë‹ˆë‹¤!");
            updateUI();
        }
    }

    function die() {
        player.hp = 0;
        document.getElementById('killer-name').innerText = monster.name;
        document.getElementById('death-quote').innerText = `"${monster.killMsg}"`;
        document.getElementById('game-over').style.display = 'flex';
    }

    function addLog(msg) {
        const win = document.getElementById('log-window');
        const d = document.createElement('div');
        d.innerHTML = `> ${msg}`;
        win.prepend(d);
        if (win.childNodes.length > 12) win.lastChild.remove();
    }

    function updateUI() {
        let s = getStats();
        document.getElementById('p-hp').innerText = Math.floor(player.hp);
        document.getElementById('p-max').innerText = s.hp;
        document.getElementById('p-hp-bar').style.width = (player.hp / s.hp * 100) + "%";
        document.getElementById('m-name').innerText = monster.name;
        document.getElementById('m-hp-text').innerText = `${Math.max(0, monster.hp)} / ${monster.max}`;
        document.getElementById('m-hp-bar').style.width = (monster.hp / monster.max * 100) + "%";
        document.getElementById('stat-atk').innerText = `ë§ë¹¨: ${s.atk}`;
        document.getElementById('stat-crit').innerText = `ì¹˜ëª…íƒ€: ${s.crit.toFixed(1)}%`;
        document.getElementById('stat-dodge').innerText = `íšŒí”¼: ${s.dodge.toFixed(1)}%`;
        document.getElementById('lv-display').innerText = player.lv;
        document.getElementById('gold-display').innerText = player.gold.toLocaleString();
        document.getElementById('heal-count').innerText = `(${player.potion})`;
        document.getElementById('book-count').innerText = Object.keys(player.book).length;

        for (let t in player.equip) {
            const el = document.getElementById(`eq-${t}`);
            const item = player.equip[t];
            if (item) {
                el.innerText = item.name;
                if(item.isUnique) el.className = "equip-name color-unique";
                else if(item.tier > 13) el.className = "equip-name color-epic";
                else if(item.tier > 7) el.className = "equip-name color-rare";
                else el.className = "equip-name";
            }
        }
    }

    window.onload = init;
</script>
</body>
</html>