<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Hunter Idle Online</title>
    <style>
        body { background: #1a1a1a; color: #00ff41; font-family: 'Courier New', monospace; display: flex; justify-content: center; padding: 20px; }
        #game-container { width: 100%; max-width: 500px; border: 2px solid #00ff41; padding: 20px; box-shadow: 0 0 10px #00ff41; }
        .panel { border: 1px solid #333; padding: 10px; margin-bottom: 10px; background: #000; }
        #log-window { height: 150px; overflow-y: auto; font-size: 14px; border-top: 1px solid #333; padding-top: 5px; }
        button { background: #00ff41; color: #000; border: none; padding: 8px; cursor: pointer; font-weight: bold; margin-right: 5px; }
        button:disabled { background: #114411; color: #004411; }
        .rare { color: #ff3e3e; font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <h2>[ HUNTER IDLE v1.0 ]</h2>
    <div class="panel">
        <p>ATK: <span id="atk">10</span> | ë¬´ê¸°: <span id="weapon">ê¸°ë³¸</span></p>
        <p>GOLD: <span id="gold">0</span> | <span id="inv">ì†Œì¬: ì—†ìŒ</span></p>
    </div>
    <div class="panel">
        <p id="m-name">ëŒ€ìƒ: ìŠ¬ë¼ì„</p>
        <p>HP: <span id="m-hp">50</span> / <span id="m-max">50</span></p>
    </div>
    <div class="panel">
        <button id="btn1" onclick="craft('ì´ˆë³´ì ê²€', 15, 'ë¹„ëŠ˜', 3)">ê²€ ì œì‘ (ë¹„ëŠ˜3)</button>
        <button id="btn2" onclick="craft('í™”ì—¼ ëŒ€ê²€', 80, 'ë¶ˆê½ƒ', 1)">ë¶ˆê½ƒê²€ (ë¶ˆê½ƒ1)</button>
    </div>
    <div id="log-window"></div>
</div>

<script>
    // 1. ê²Œì„ ë°ì´í„° ì´ˆê¸°í™”
    let player = { atk: 10, gold: 0, weapon: "ê¸°ë³¸", inv: {}, lv: 1 };
    let monster = { name: "ìŠ¬ë¼ì„", hp: 50, max: 50, drop: "ë¹„ëŠ˜", gold: 10 };

    // 2. ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° (localStorage - ì›¹ í™˜ê²½ì—ì„œ ê°€ì¥ ì•ˆì „)
    function save() {
        localStorage.setItem('hunter_save', JSON.stringify({ player, monster }));
    }

    function load() {
        const saved = localStorage.getItem('hunter_save');
        if (saved) {
            const d = JSON.parse(saved);
            player = d.player;
            monster = d.monster;
            addLog("ğŸ’¾ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.");
        }
    }

    // 3. ì „íˆ¬ ë¡œì§
    function battle() {
        monster.hp -= player.atk;
        if (monster.hp <= 0) {
            player.gold += monster.gold;
            let dMsg = "";
            if (Math.random() > 0.5) {
                player.inv[monster.drop] = (player.inv[monster.drop] || 0) + 1;
                dMsg = ` [+${monster.drop}]`;
            }
            addLog(`âœ… ${monster.name} ì²˜ì¹˜! +${monster.gold}G${dMsg}`);
            player.lv++;
            spawn();
            save(); // ìŠ¹ë¦¬ ì‹œ ìë™ ì €ì¥
        }
        updateUI();
    }

    function spawn() {
        if (Math.random() < 0.1) { // 10% í¬ê·€ ëª¬ìŠ¤í„°
            monster = { name: "ğŸ”¥í™”ì—¼ ë¦¬ì˜¤ë ˆ", hp: 300+(player.lv*10), max: 300+(player.lv*10), drop: "ë¶ˆê½ƒ", gold: 100 };
            addLog("<span class='rare'>âš ï¸ í¬ê·€ ëª¬ìŠ¤í„° ì¶œí˜„!</span>");
        } else {
            monster = { name: "ìŠ¬ë¼ì„", hp: 50+(player.lv*5), max: 50+(player.lv*5), drop: "ë¹„ëŠ˜", gold: 15 };
        }
    }

    function craft(name, pwr, mat, count) {
        if ((player.inv[mat] || 0) >= count) {
            player.inv[mat] -= count;
            player.atk += pwr;
            player.weapon = name;
            addLog(`ğŸ› ï¸ ${name} ì œì‘ ì„±ê³µ! (ê³µê²©ë ¥ +${pwr})`);
            updateUI();
            save();
        }
    }

    function updateUI() {
        document.getElementById('atk').innerText = player.atk;
        document.getElementById('gold').innerText = player.gold;
        document.getElementById('weapon').innerText = player.weapon;
        document.getElementById('m-name').innerText = `ëŒ€ìƒ: ${monster.name}`;
        document.getElementById('m-hp').innerText = Math.max(0, monster.hp);
        document.getElementById('m-max').innerText = monster.max;
        
        let invS = "ì†Œì¬: ";
        for(let k in player.inv) if(player.inv[k]>0) invS += `${k}(${player.inv[k]}) `;
        document.getElementById('inv').innerText = invS;

        document.getElementById('btn1').disabled = (player.inv['ë¹„ëŠ˜'] || 0) < 3;
        document.getElementById('btn2').disabled = (player.inv['ë¶ˆê½ƒ'] || 0) < 1;
    }

    function addLog(m) {
        const l = document.getElementById('log-window');
        l.innerHTML = `> ${m}<br>` + l.innerHTML;
        if (l.childNodes.length > 20) l.removeChild(l.lastChild);
    }

    // ì‹¤í–‰ ì‹œì‘
    window.onload = () => {
        load();
        updateUI();
        setInterval(battle, 1000); // 1ì´ˆë§ˆë‹¤ ìë™ ì „íˆ¬
    };
</script>
</body>
</html>