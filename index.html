<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VILLAIN HUNTER : 50 Villains (50% Heal Edition)</title>
    <style>
        :root {
            --bg-color: #0c0c0c; --panel-bg: #1a1a1a; --text-main: #eeeeee;
            --common: #ffffff; --rare: #ffff00; --epic: #bf00ff;
            --danger: #ff4444; --border: #333333; --gold: #ffd700;
        }
        body { background: var(--bg-color); color: var(--text-main); font-family: 'Pretendard', sans-serif; display: flex; justify-content: center; padding: 20px; margin: 0; line-height: 1.4; }
        #game-container { width: 100%; max-width: 420px; background: var(--panel-bg); border-radius: 20px; padding: 25px; border: 1px solid var(--border); position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid var(--border); padding-bottom: 10px; }
        .panel { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .color-common { color: var(--common); }
        .color-rare { color: var(--rare); font-weight: bold; }
        .color-epic { color: var(--epic); font-weight: bold; text-shadow: 0 0 5px var(--epic); }
        .color-gold { color: var(--gold); font-weight: 900; }
        .hp-bar-bg { width: 100%; height: 12px; background: #222; margin: 8px 0; border-radius: 6px; overflow: hidden; border: 1px solid #333; }
        .hp-fill { height: 100%; transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        button { background: #fff; color: #000; border: none; padding: 12px; cursor: pointer; font-weight: 900; border-radius: 8px; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #333; color: #666; cursor: not-allowed; transform: none; }
        #log-window { height: 130px; overflow-y: auto; font-size: 13px; color: #bbb; display: flex; flex-direction: column-reverse; gap: 6px; padding: 12px; background: #000; border-radius: 10px; border: 1px solid #333; margin-bottom: 10px; }
        .skill-text { color: #ff8800; font-weight: bold; font-size: 12px; }
        .modal { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; padding: 30px; box-sizing: border-box; background: rgba(0,0,0,0.95); flex-direction: column; align-items: center; justify-content: center; text-align: center; border-radius: 20px; }
        .death-msg { color: var(--danger); font-style: italic; margin: 15px 0; font-size: 16px; line-height: 1.5; word-break: keep-all; }
        .reset-btn { background: transparent; color: #555; font-size: 11px; text-decoration: underline; margin-top: 15px; border: none; cursor: pointer; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="game-over" class="modal">
        <h1 style="color:var(--danger); margin-bottom: 0; font-size: 40px;">DEFEATED</h1>
        <div id="killer-info" style="font-size: 14px; color: #888; margin-top: 10px;"></div>
        <div id="final-skill" class="skill-text" style="font-size:18px; margin-top:10px;"></div>
        <div class="death-msg" id="death-quote"></div>
        <button onclick="revive()" style="width: 80%; background: var(--danger); color: #fff;">ë‹¤ì‹œ ë„ì „ (GOLD ìœ ì§€)</button>
    </div>

    <div id="ending-ui" class="modal">
        <h1 class="color-epic">VILLAIN MASTER</h1>
        <p>50ì¢…ì˜ ë¹ŒëŸ°ì„ ëª¨ë‘ ì •ë³µí–ˆìŠµë‹ˆë‹¤!</p>
        <button onclick="rebirth()" style="width: 80%;">ì „ì„¤ë¡œ í™˜ìƒ</button>
    </div>

    <div class="header">
        <strong>VILLAIN HUNTER</strong>
        <div style="font-size:11px">ë„ê°: <span id="book-count-header" class="color-rare">0</span>/50</div>
    </div>
    
    <div class="panel">
        <div style="display:flex; justify-content:space-between; font-weight:bold;">
            <span id="atk-display">ATK 10</span>
            <span>HP <span id="p-hp">100</span> / <span id="p-max">100</span></span>
        </div>
        <div class="hp-bar-bg"><div id="p-hp-bar" class="hp-fill" style="background:#fff;"></div></div>
        <button id="heal-btn" style="width:100%" onclick="usePotion()">ğŸ• ì ì‹¬ ì‹ì‚¬ <span id="heal-count">(0)</span></button>
        <div style="font-size:12px; color:#aaa; display:flex; justify-content:space-between; margin-top:12px;">
            <span>GOLD: <span id="gold" class="color-gold">0</span></span>
            <span>LV: <span id="lv-display">1</span></span>
            <span>RE: <span id="re-count" class="color-epic">0</span></span>
        </div>
    </div>

    <div class="panel" style="border-left: 4px solid var(--danger);">
        <div id="m-name" style="font-weight:900; font-size:17px;">Target</div>
        <div class="hp-bar-bg"><div id="m-hp-bar" class="hp-fill" style="background:var(--danger);"></div></div>
        <div id="m-hp-text" style="text-align:right; font-size:11px; color: #888;">0 / 0</div>
    </div>

    <div class="panel">
        <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px;">
            <button class="color-common" id="btn1" onclick="craft('íš¨ìì†', 15, 25, 'ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·', 3)">íš¨ìì†</button>
            <button class="color-rare" id="btn2" onclick="craft('í¸ì§€', 60, 120, 'ì‚¬ì§ì„œ', 1)">í¸ì§€</button>
            <button class="color-epic" id="btn3" onclick="craft('ì†”', 200, 400, 'ì•”ëª¨ë‹ˆì•„', 1)">ì†”</button>
        </div>
        <div id="inv" style="font-size:11px; margin-top:12px; color:#888; text-align: center;">ì†Œì¬ ì—†ìŒ</div>
    </div>

    <div id="log-window"></div>
    <div style="text-align: center;">
        <button class="reset-btn" onclick="hardReset()">ë°ì´í„° ì´ˆê¸°í™”</button>
    </div>
</div>

<script>
    const MONSTERS = {
        normal: [
            { name: "ì¶œê·¼ ëŒ€ë¦¬ë‹˜", skill: "ì„œë¥˜ ë­‰ì¹˜ ë˜ì§€ê¸°", hp: 60, atk: 5, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 20, killMsg: "ê±° ê¹€ëŒ€ë¦¬, ì´ ì„œë¥˜ ì˜¤ëŠ˜ê¹Œì§€ì•¼." },
            { name: "ë²•ì¹´ ë¶€ì¥ë‹˜", skill: "ì•„ì¬ê°œê·¸ ë‚œì‚¬", hp: 75, atk: 8, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 25, killMsg: "ì˜¤ëŠ˜ íšŒì‹ì€ ì‚¼ê²¹ì‚´ì´ë‹¤!" },
            { name: "ë¼ë–¼ ì°¨ì¥ë‹˜", skill: "ë‚˜ë•ŒëŠ” ë§ì´ì•¼", hp: 80, atk: 10, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 30, killMsg: "ë‚˜ ë•ŒëŠ” ë§ì´ì•¼, íœ´ê°€ ê°™ì€ ê±° ëª°ëì–´." },
            { name: "í‡´ê·¼ì§ì „ íŒ€ì¥ë‹˜", skill: "ê°€ê¸°ì „ì— ì ê¹ë§Œ", hp: 130, atk: 22, drop: "ì‚¬ì§ì„œ", gold: 60, killMsg: "ì•„, ê°€ê¸° ì „ì— ì´ê²ƒë§Œ ì¢€ ê³ ì³ì¤„ë˜?" },
            { name: "ìƒˆë¼ë°œê°€ë½ ì°§ìŒ", skill: "ëª¨ì„œë¦¬ ì¹´ìš´í„°", hp: 200, atk: 65, drop: "ì•”ëª¨ë‹ˆì•„", gold: 110, killMsg: "(ë¹„ëª…ê³¼ í•¨ê»˜ ì •ì‹ ì´ ì•„ë“í•´ì§‘ë‹ˆë‹¤.)" },
            { name: "ì €ì¥ ì•ˆí•œ ë¬¸ì„œ", skill: "ë¸”ë£¨ìŠ¤í¬ë¦° ê°•ë¦¼", hp: 200, atk: 70, drop: "ì•”ëª¨ë‹ˆì•„", gold: 120, killMsg: "8ì‹œê°„ì˜ ì‘ì—…ë¬¼ì´ ì¦ë°œí–ˆìŠµë‹ˆë‹¤." },
            { name: "ê¸‰ë˜¥ ì‹ í˜¸", skill: "ê´„ì•½ê·¼ ì••ë°•", hp: 180, atk: 55, drop: "ì•”ëª¨ë‹ˆì•„", gold: 110, killMsg: "ê°€ì¥ ê°€ê¹Œìš´ í™”ì¥ì‹¤ì€ 1km ë°–ì´ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ìŠ¤í¬ì¼ëŸ¬ ë¹ŒëŸ°", skill: "ë²”ì¸ ìœ ì¶œ", hp: 110, atk: 25, drop: "ì‚¬ì§ì„œ", gold: 50, killMsg: "ì‚¬ì‹¤ ì£¼ì¸ê³µ ê¿ˆì´ì—ˆìŒ." },
            { name: "í™”ì¥ì‹¤ íœ´ì§€ì—†ìŒ", skill: "ë¹ˆ ì‹¬ì‹¬ì´", hp: 190, atk: 45, drop: "ì•”ëª¨ë‹ˆì•„", gold: 100, killMsg: "ì‹ ê»˜ ê¸°ë„í–ˆì§€ë§Œ ì–‘ë§ë§Œ ì³ë‹¤ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ì”ì•¡ ë¶€ì¡± ì¹´ë“œ", skill: "ê²°ì œ ê±°ë¶€", hp: 110, atk: 30, drop: "ì‚¬ì§ì„œ", gold: 55, killMsg: "ë’¤ì— ì¤„ ì„  ì‚¬ëŒë“¤ì˜ í•œìˆ¨ ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤." },
            { name: "ë°ì´í„° ì—†ëŠ” í°", skill: "ë¡œë”© ì§€ì˜¥", hp: 50, atk: 10, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 20, killMsg: "ì§€í•˜ì² ì—ì„œ ìœ íŠœë¸Œê°€ ë©ˆì·„ìŠµë‹ˆë‹¤." },
            { name: "ì´ì–´í° í•œìª½ ê³ ì¥", skill: "ëª¨ë…¸ ì‚¬ìš´ë“œ", hp: 90, atk: 15, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 35, killMsg: "ì™¼ìª½ ê·€ê°€ ì ë§‰ì— íœ©ì‹¸ì˜€ìŠµë‹ˆë‹¤." },
            { name: "ìŠ¤íŒ¸ ì „í™” 070", skill: "ê°•ì œ ë²¨ì†Œë¦¬", hp: 40, atk: 5, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 15, killMsg: "ëŒ€ì¶œ ìƒë‹´ì›ì´ ë©˜íƒˆì„ í„¸ì–´ê°”ìŠµë‹ˆë‹¤." },
            { name: "ì½ì”¹í•˜ëŠ” ì¸ë‚¨ì¸ë…€", skill: "ìˆ«ì 1 ì•ˆì‚¬ë¼ì§", hp: 140, atk: 35, drop: "ì‚¬ì§ì„œ", gold: 75, killMsg: "ë‹¹ì‹ ì€ ê·¸ì—ê²Œ 'ì½ì§€ë„ ì•Šì€' ì‚¬ëŒì…ë‹ˆë‹¤." },
            { name: "ì¸µê°„ì†ŒìŒ ë§ì¹˜", skill: "ìƒˆë²½ì˜ ë“œë¦´", hp: 160, atk: 40, drop: "ì•”ëª¨ë‹ˆì•„", gold: 85, killMsg: "ìœ—ì§‘ì˜ ê³µì‚¬ëŠ” 24ì‹œê°„ ê³„ì†ë©ë‹ˆë‹¤." },
            { name: "ê´‘ê³  ê±´ë„ˆë›°ê¸° ë¶ˆê°€", skill: "15ì´ˆì˜ í˜•ë²Œ", hp: 80, atk: 12, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 30, killMsg: "ê´€ì‹¬ ì—†ëŠ” ê´‘ê³ ë¥¼ ë‹¤ ë´¤ìŠµë‹ˆë‹¤." },
            { name: "ì•ˆí„°ì§€ëŠ” WIFI", skill: "ì—°ê²° ì—†ìŒ", hp: 75, atk: 14, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 28, killMsg: "ì¤‘ìš”í•œ ìˆœê°„ì— ëŠê²¼ìŠµë‹ˆë‹¤." },
            { name: "ì•ˆ ì”»ì€ í…€ë¸”ëŸ¬", skill: "ê³°íŒ¡ì´ í–¥ê¸°", hp: 65, atk: 18, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 25, killMsg: "ì¼ì£¼ì¼ ì „ ë¼ë–¼ ëƒ„ìƒˆì— ì¤‘ë…ë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ë§Œì› ë²„ìŠ¤ ë°±íŒ©", skill: "ë“± ë’¤ì˜ ì••ë°•", hp: 120, atk: 25, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 45, killMsg: "ëˆ„êµ°ê°€ì˜ ê°€ë°©ì´ ê°ˆë¹„ë¼ˆë¥¼ ëˆ„ë¦…ë‹ˆë‹¤." },
            { name: "ê²¨ìš¸ì²  ì •ì „ê¸°", skill: "ìŠ¤íŒŒí¬ ìƒ·", hp: 90, atk: 40, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 35, killMsg: "ì†ëì—ì„œ ë²ˆê°œê°€ ì³¤ìŠµë‹ˆë‹¤." },
            { name: "ë¹„ì˜¤ëŠ” í° ìš´ë™í™”", skill: "í™íƒ•ë¬¼ ì¹¨íˆ¬", hp: 110, atk: 22, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 40, killMsg: "ì˜¤ëŠ˜ ì²˜ìŒ ì‹ ì€ ì‹ ë°œì´ ê±¸ë ˆê°€ ë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ì˜ëª» ë³´ë‚¸ ì¹´í†¡", skill: "ë¶€ì¥ë‹˜ê»˜ ê³ ë°±", hp: 150, atk: 60, drop: "ì‚¬ì§ì„œ", gold: 90, killMsg: "ì‚¬íšŒì  ì£½ìŒì„ ë§ì´í–ˆìŠµë‹ˆë‹¤." },
            { name: "ì¹¨ëŒ€ ë°‘ ë¦¬ëª¨ì»¨", skill: "ì‹¬ì—°", hp: 70, atk: 12, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 22, killMsg: "ì†ì´ ë‹¿ì§€ ì•Šì•„ TVë¥¼ ë„ì§€ ëª»í–ˆìŠµë‹ˆë‹¤." },
            { name: "ì•ˆ ì§€ì›Œì§€ëŠ” ì–¼ë£©", hp: 100, atk: 20, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 35, killMsg: "ë§ˆë¼íƒ• êµ­ë¬¼ì€ ë¬´ì ì…ë‹ˆë‹¤." },
            { name: "ë¹„ë²ˆ 5íšŒ ì˜¤ë¥˜", skill: "ê³„ì • ì ê¸ˆ", hp: 140, atk: 45, drop: "ì‚¬ì§ì„œ", gold: 70, killMsg: "ë³¸ì¸ ì¸ì¦ì˜ ëŠªì— ë¹ ì ¸ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤." },
            { name: "USB ë°©í–¥ ë°˜ëŒ€ë¡œ", skill: "ë¬´í•œ ë’¤ì§‘ê¸°", hp: 45, atk: 8, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 12, killMsg: "3ë²ˆì„ ë’¤ì§‘ì–´ë„ ë“¤ì–´ê°€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤." },
            { name: "ê¹œë¹¡í•œ ì—ì–´ì»¨", skill: "ì „ê¸°ì„¸ í­íƒ„", hp: 170, atk: 30, drop: "ì‚¬ì§ì„œ", gold: 100, killMsg: "íœ´ê°€ 3ì¼ ë‚´ë‚´ ë¹ˆ ì§‘ì´ ì‹œì›í–ˆìŠµë‹ˆë‹¤." },
            { name: "ëˆ…ëˆ…í•´ì§„ ì‹œë¦¬ì–¼", hp: 40, atk: 4, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 10, killMsg: "ë°”ì‚­í•¨ì´ ì—†ëŠ” ì‚¶ì€ ì˜ë¯¸ê°€ ì—†ìŠµë‹ˆë‹¤." },
            { name: "ì•ˆ ì—´ë¦¬ëŠ” ë³‘ëšœê»‘", hp: 95, atk: 15, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 35, killMsg: "ì•„ê·€í˜ì´ ë‹¤ ë¹ ì ¸ êµ¶ì–´ ì£½ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ê³ ì¥ë‚œ í‚¤ë³´ë“œ", skill: "ì—”í„°í‚¤ ë¨¹í†µ", hp: 130, atk: 30, drop: "ì‚¬ì§ì„œ", gold: 65, killMsg: "ë³´ê³ ì„œë¥¼ ì™„ì„±í–ˆì§€ë§Œ ì œì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." },
            { name: "ì…ê¸ˆ ì „ í´ë¼ì´ì–¸íŠ¸", skill: "ì‹œì•ˆ 50ë²ˆ ìˆ˜ì •", hp: 210, atk: 40, drop: "ì‚¬ì§ì„œ", gold: 110, killMsg: "ì²« ë²ˆì§¸ ì‹œì•ˆì´ ì œì¼ ë‚«ë„¤ìš”." },
            { name: "ì¡°ë³„ê³¼ì œ í”„ë¦¬ë¼ì´ë”", skill: "ì ìˆ˜ íƒ€ê¸°", hp: 140, atk: 25, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 55, killMsg: "í˜ˆì•• ìƒìŠ¹ìœ¼ë¡œ ë’·ëª©ì„ ì¡ì•˜ìŠµë‹ˆë‹¤." },
            { name: "ë¹¨ê°„ë¶ˆ íš¡ë‹¨ë³´ë„", skill: "ê°„ë°œì˜ ì°¨ì´", hp: 85, atk: 10, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 25, killMsg: "ëˆˆì•ì—ì„œ ë²„ìŠ¤ê°€ ë– ë‚˜ê°”ìŠµë‹ˆë‹¤." },
            { name: "ìŠ¤í”¼ì»¤ ì¼œì§„ ì•¼ë™", skill: "ê³µê³µì¥ì†Œ ìˆ˜ì¹˜ì‚¬", hp: 250, atk: 99, drop: "ì•”ëª¨ë‹ˆì•„", gold: 200, killMsg: "ì¹´í˜ ì•ˆì˜ ëª¨ë“  ì‹œì„ ì´ ë‹¹ì‹ ì„ í–¥í•©ë‹ˆë‹¤." },
            { name: "ìœ í†µê¸°í•œ ì§€ë‚œ ìš°ìœ ", skill: "ë³µí†µì˜ ì¼ê²©", hp: 110, atk: 50, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 45, killMsg: "ì´ë¯¸ ëª©êµ¬ë©ì„ ë„˜ì–´ê°”ì„ ë• ëŠ¦ì—ˆìŠµë‹ˆë‹¤." },
            { name: "íƒë°° ì˜¤ë°°ì†¡", skill: "ì˜†ì§‘ìœ¼ë¡œ ë°°ë‹¬", hp: 130, atk: 20, drop: "ì‚¬ì§ì„œ", gold: 60, killMsg: "ë‚´ ì†Œì¤‘í•œ ë¬¼ê±´ì´ 5ì¸µìœ¼ë¡œ ê°”ìŠµë‹ˆë‹¤." },
            { name: "ì¹´ê³µì¡±ì˜ ëˆˆì´", skill: "í‚¤ë³´ë“œ ì†Œë¦¬ ê²€ì—´", hp: 90, atk: 18, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 30, killMsg: "ë…¸íŠ¸ë¶ íƒ€ì´í•‘ í•œ ë²ˆì— ì‚´ê¸°ë¥¼ ëŠê¼ˆìŠµë‹ˆë‹¤." },
            { name: "ê´‘ê³  ì „í™” 02", skill: "ë³´ì´ìŠ¤ í”¼ì‹±", hp: 100, atk: 15, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 40, killMsg: "ê²€ì°°ì²­ ì‚¬ì¹­ì— ë‚šì—¬ ë©˜íƒˆì´ í„¸ë ¸ìŠµë‹ˆë‹¤." },
            { name: "ì§€í•˜ì²  ì•ì‚¬ëŒ ë°±íŒ©", skill: "ì–¼êµ´ íƒ€ê²©", hp: 115, atk: 28, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 45, killMsg: "ê°€ë°© ëª¨ì„œë¦¬ê°€ ê´‘ëŒ€ë¼ˆë¥¼ ê°•íƒ€í–ˆìŠµë‹ˆë‹¤." },
            { name: "ë¬´í•œ ë¡œë”© ìŠ¤í”¼ë„ˆ", skill: "ë¹™ê¸€ë¹™ê¸€ ì§€ì˜¥", hp: 80, atk: 10, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 25, killMsg: "í™”ë©´ë§Œ ë³´ë‹¤ ëˆˆì´ ë©€ì—ˆìŠµë‹ˆë‹¤." }
        ],
        rare: [
            { name: "ğŸ‘‘ ì›”ìš”ì¼ 8:59AM", skill: "ì§€ì˜¥ì˜ ì•ŒëŒ ì†Œë¦¬", hp: 1500, atk: 100, drop: "ì‚¬ì§ì„œ", gold: 500, killMsg: "ì–´ì„œì™€, ì§€ì˜¥ì˜ 5ì¼ì´ ì‹œì‘ë˜ì—ˆë‹¨ë‹¤." },
            { name: "ğŸ‘‘ ìœˆë„ìš° ì—…ë°ì´íŠ¸", skill: "ì§„í–‰ë¥  1%ì˜ ì €ì£¼", hp: 1800, atk: 85, drop: "ì‚¬ì§ì„œ", gold: 600, killMsg: "ë°œí‘œ ì§ì „, PCê°€ êº¼ì¡ŒìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ì•¡ì • íŒŒì†", skill: "ì„¤íƒ• ì•¡ì • í¬ë˜ì‹œ", hp: 2000, atk: 150, drop: "ì•”ëª¨ë‹ˆì•„", gold: 1000, killMsg: "ìˆ˜ë¦¬ë¹„ 35ë§Œì›ì´ ì²­êµ¬ë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ëª…ì ˆ ì”ì†Œë¦¬", skill: "ì·¨ì—…/ê²°í˜¼ ì½¤ë³´", hp: 1600, atk: 80, drop: "ì‚¬ì§ì„œ", gold: 700, killMsg: "ê·¸ë˜ì„œ ëˆì€ ì–¼ë§ˆë‚˜ ëª¨ì•˜ë‹ˆ?" },
            { name: "ğŸ‘‘ ì˜ˆë¹„êµ° í†µì§€ì„œ", skill: "êµ­ë°©ì˜ ë¶€ë¦„", hp: 1700, atk: 90, drop: "ì‚¬ì§ì„œ", gold: 800, killMsg: "ë™ì› í›ˆë ¨ ëŒ€ìƒìë¡œ ì„ ì •ë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ëˆ„ì§„ì„¸ ê³ ì§€ì„œ", skill: "ì „ê¸°ë£Œ í­íƒ„", hp: 1900, atk: 110, drop: "ì•”ëª¨ë‹ˆì•„", gold: 900, killMsg: "ì´ë²ˆ ë‹¬ ì›”ê¸‰ì´ í•œì „ì— ì…ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ë°°í„°ë¦¬ 1%", skill: "í™”ë©´ êº¼ì§ ê°•ê¶Œ", hp: 1400, atk: 130, drop: "ì‚¬ì§ì„œ", gold: 750, killMsg: "ë³´ì¡°ë°°í„°ë¦¬ê°€ ê°€ë°© ì†ì— ì—†ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ìë‹ˆ? ì „ì• ì¸", skill: "ê°ì„± ì¶”ì–µ íŒ”ì´", hp: 1450, atk: 120, drop: "ì•”ëª¨ë‹ˆì•„", gold: 850, killMsg: "ìƒˆë²½ 2ì‹œì˜ ìë‹ˆ? ë¬¸ìëŠ” ì¹˜ëª…ì ì´ì—ˆìŠµë‹ˆë‹¤." },
            { name: "ğŸ‘‘ ì„œë²„ ì ê²€ ì¤‘", skill: "ê¸´ê¸‰ ì„œë¹„ìŠ¤ ì ê²€", hp: 1550, atk: 70, drop: "ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·", gold: 500, killMsg: "ì ê²€ ì™„ë£Œ ì˜ˆì • ì‹œê°„: ë¯¸ì •" },
            { name: "ğŸ‘‘ ë¶€ì¥ë‹˜ ê°œì¸ê¸°", skill: "ê°•ì œ ë°•ìˆ˜ ìœ ë„", hp: 1400, atk: 90, drop: "ì‚¬ì§ì„œ", gold: 650, killMsg: "ì•ˆ ì›ƒìœ¼ë©´ ë‚´ì¼ì´ ì—†ì„ ê²ƒ ê°™ì•„ ì£½ì—ˆìŠµë‹ˆë‹¤." }
        ]
    };

    let player, monster;
    const initialStats = { lv:1, atk:10, hp:100, maxHp:100, gold:0, inv:{}, book:{}, rebirthCount:0, potion:1, totalKills:0 };

    function initGame() {
        const saved = localStorage.getItem('vh_final_v50_50h');
        player = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(initialStats));
        player.isDead = false;
        addLog("ì‚¬ëƒ¥ ì‹œì‘! ë¹ŒëŸ° ì²˜ì¹˜ ì‹œ ì²´ë ¥ì´ 50% íšŒë³µë©ë‹ˆë‹¤.");
        spawn();
        updateUI();
    }

    function addLog(msg) {
        const logWin = document.getElementById('log-window');
        const div = document.createElement('div');
        div.innerHTML = `> ${msg}`;
        logWin.prepend(div);
        if(logWin.childNodes.length > 20) logWin.lastChild.remove();
    }

    function spawn() {
        const isRare = (Math.random() < 0.15 && player.totalKills > 15);
        let pool = isRare ? MONSTERS.rare : MONSTERS.normal;
        let d = pool[Math.floor(Math.random() * pool.length)];
        let growth = 1 + (player.lv * 0.09);
        monster = { 
            name: d.name, skill: d.skill || "í‚¹ë°›ê²Œ í•˜ê¸°",
            max: Math.floor((d.hp + (player.lv * 15)) * growth),
            hp: Math.floor((d.hp + (player.lv * 15)) * growth),
            atk: Math.floor((d.atk + (player.lv * 4)) * growth),
            gold: d.gold, drop: d.drop, isBoss: isRare, killMsg: d.killMsg
        };
        addLog(`<span class="${isRare?'color-epic':''}">[${monster.name}]</span> ì¶œí˜„!`);
        updateUI();
    }

    function battle() {
        if(player.isDead) return;
        monster.hp -= player.atk;
        if(monster.hp > 0) {
            player.hp -= monster.atk;
            addLog(`<span class="skill-text">ã€Œ${monster.skill}ã€</span> -${monster.atk}HP`);
        }
        if(player.hp <= 0) { player.hp = 0; gameOver(); }
        else if(monster.hp <= 0) win();
        updateUI();
    }

    function win() {
        player.gold += monster.gold;
        player.totalKills++;
        player.book[monster.name] = (player.book[monster.name] || 0) + 1;
        
        // â˜… ì²´ë ¥ 50% íšŒë³µ ë¡œì§ ì ìš©
        const healAmt = Math.floor(player.maxHp * 0.5);
        player.hp = Math.min(player.maxHp, player.hp + healAmt);
        
        addLog(`${monster.name} ì²˜ì¹˜! <span style="color:#00ff00">+${healAmt}HP íšŒë³µ</span>`);
        if(Math.random() < 0.45) player.inv[monster.drop] = (player.inv[monster.drop] || 0) + 1;
        
        if(Object.keys(player.book).length >= 50) {
            player.isDead = true;
            document.getElementById('ending-ui').style.display = 'flex';
        } else {
            player.lv++; spawn(); save();
        }
    }

    function gameOver() {
        player.isDead = true;
        document.getElementById('killer-info').innerText = `${monster.name}ì˜ ê²°ì •íƒ€!`;
        document.getElementById('final-skill').innerText = `ê¸°ìˆ : ã€Œ${monster.skill}ã€`;
        document.getElementById('death-quote').innerText = `"${monster.killMsg}"`;
        document.getElementById('game-over').style.display = 'flex';
    }

    function revive() {
        const g = player.gold, b = player.book, r = player.rebirthCount;
        player = JSON.parse(JSON.stringify(initialStats));
        player.gold = g; player.book = b; player.rebirthCount = r;
        player.atk += (r * 150); player.maxHp += (r * 300); player.hp = player.maxHp;
        document.getElementById('game-over').style.display = 'none';
        spawn(); save();
    }

    function rebirth() {
        player.rebirthCount++;
        const b = player.book, r = player.rebirthCount;
        player = JSON.parse(JSON.stringify(initialStats));
        player.book = b; player.rebirthCount = r;
        player.atk += (r * 150); player.maxHp += (r * 300); player.hp = player.maxHp;
        document.getElementById('ending-ui').style.display = 'none';
        spawn(); save();
    }

    function hardReset() {
        if(confirm("ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í• ê¹Œìš”?")) {
            localStorage.removeItem('vh_final_v50_50h');
            location.reload();
        }
    }

    function save() { localStorage.setItem('vh_final_v50_50h', JSON.stringify(player)); }

    function updateUI() {
        document.getElementById('p-hp').innerText = Math.floor(player.hp);
        document.getElementById('p-max').innerText = player.maxHp;
        document.getElementById('p-hp-bar').style.width = (player.hp/player.maxHp*100) + "%";
        document.getElementById('m-hp-bar').style.width = (monster.hp/monster.max*100) + "%";
        document.getElementById('m-hp-text').innerText = `${Math.max(0, monster.hp)} / ${monster.max}`;
        document.getElementById('atk-display').innerText = `ATK ${player.atk}`;
        document.getElementById('gold').innerText = player.gold.toLocaleString();
        document.getElementById('lv-display').innerText = player.lv;
        document.getElementById('re-count').innerText = player.rebirthCount;
        document.getElementById('heal-count').innerText = `(${player.potion})`;
        document.getElementById('book-count-header').innerText = Object.keys(player.book).length;
        const mEl = document.getElementById('m-name');
        mEl.innerText = monster.name;
        mEl.className = monster.isBoss ? 'color-epic' : 'color-common';
        let invH = "";
        for(let key in player.inv) {
            if(player.inv[key] > 0) {
                let cls = key === 'ì•”ëª¨ë‹ˆì•„' ? 'color-epic' : (key === 'ì‚¬ì§ì„œ' ? 'color-rare' : 'color-common');
                invH += `<span class="${cls}">${key}(${player.inv[key]})</span> `;
            }
        }
        document.getElementById('inv').innerHTML = invH || "ì†Œì¬ ì—†ìŒ";
        document.getElementById('btn1').disabled = (player.inv['ëˆ…ëˆ…í•œ íŠ€ê¹€ì˜·'] || 0) < 3;
        document.getElementById('btn2').disabled = (player.inv['ì‚¬ì§ì„œ'] || 0) < 1;
        document.getElementById('btn3').disabled = (player.inv['ì•”ëª¨ë‹ˆì•„'] || 0) < 1;
    }

    function usePotion() {
        if(player.potion > 0 && !player.isDead) {
            player.potion--;
            player.hp = Math.min(player.maxHp, player.hp + Math.floor(player.maxHp * 0.8));
            addLog("ğŸ• ì—ë„ˆì§€ë¥¼ ë³´ì¶©í–ˆìŠµë‹ˆë‹¤.");
            updateUI();
        }
    }

    function craft(n, a, h, m, c) {
        if((player.inv[m]||0) >= c) {
            player.inv[m] -= c; player.atk += a; player.maxHp += h; player.hp = player.maxHp;
            addLog(`ğŸ›  [${n}] ê°•í™”! ATK+${a} HP+${h}`);
            updateUI(); save();
        }
    }

    window.onload = () => { initGame(); setInterval(battle, 1000); };
</script>
</body>
</html>